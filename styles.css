/* ============================================================
   BAF3M Classified Balance Sheet — Complete Stylesheet
   ============================================================ */

/* ---------- Design tokens ---------- */
:root {
  --blue:        #1d6bf3;
  --blue-dk:     #1558d6;
  --blue-bg:     #e8f0fe;
  --blue-border: #b3d1ff;
  --red:         #d93025;
  --red-dk:      #b71c1c;
  --red-bg:      #fde8e8;
  --red-border:  #f5b7b7;
  --green:       #1a7f3c;
  --green-bg:    #e6f4ea;
  --green-border:#a8dab5;
  --orange:      #e65100;
  --orange-bg:   #fff3e0;
  --orange-border:#ffcc80;
  --purple:      #6200ea;
  --purple-bg:   #ede7f6;
  --purple-border:#ce93d8;
  --gold:        #f59e0b;
  --gold-bg:     #fffbeb;
  --bg:          #f4f6fb;
  --card:        #ffffff;
  --text:        #0f172a;
  --muted:       #64748b;
  --border:      #e2e8f0;
  --radius:      12px;
  --radius-sm:   8px;
  --shadow-sm:   0 1px 4px rgba(0,0,0,.06);
  --shadow:      0 2px 16px rgba(0,0,0,.08);
  --shadow-lg:   0 8px 40px rgba(0,0,0,.12);
  --font:        'Inter', 'Segoe UI', system-ui, sans-serif;
  --mono:        'JetBrains Mono', 'Consolas', monospace;
  --nav-h:       58px;
}

/* ---------- Reset ---------- */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; scroll-padding-top: calc(var(--nav-h) + 16px); }
body {
  font-family: var(--font);
  background: var(--bg);
  color: var(--text);
  line-height: 1.7;
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
}
a { color: var(--blue); text-decoration: none; }
a:hover { text-decoration: underline; }
ul, ol { padding-left: 1.5em; }
li { margin-bottom: 4px; }
p { margin-bottom: 10px; }
p:last-child { margin-bottom: 0; }

/* ---------- Utility ---------- */
.container { max-width: 1140px; margin: 0 auto; padding: 0 24px; }
.hidden { display: none !important; }
.badge {
  display: inline-block; background: var(--blue); color: #fff;
  font-size: .65em; padding: 2px 8px; border-radius: 99px;
  vertical-align: middle; margin-left: 5px; font-weight: 700;
}

/* ============================================================
   READING PROGRESS BAR
   ============================================================ */
#readingProgress {
  position: fixed; top: 0; left: 0; z-index: 1000;
  height: 3px; width: 0; background: linear-gradient(90deg, var(--blue), #a78bfa);
  transition: width .1s linear;
}

/* ============================================================
   NAVIGATION
   ============================================================ */
#topnav {
  position: sticky; top: 0; z-index: 900;
  background: rgba(255,255,255,.95);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border-bottom: 1px solid var(--border);
  height: var(--nav-h);
}
.nav-inner {
  max-width: 1140px; margin: 0 auto; padding: 0 24px;
  display: flex; align-items: center; height: 100%; gap: 8px;
}
.brand { font-weight: 900; font-size: 1.05rem; color: var(--text); margin-right: auto; letter-spacing: -.01em; }
.brand span { color: var(--blue); }
#nav-links { list-style: none; display: flex; gap: 2px; padding: 0; }
#nav-links a {
  display: block; padding: 6px 11px; border-radius: 7px;
  font-size: .83rem; font-weight: 500; color: var(--muted);
  transition: background .15s, color .15s; white-space: nowrap;
}
#nav-links a:hover, #nav-links a.active {
  background: var(--blue-bg); color: var(--blue); text-decoration: none;
}
.hamburger {
  display: none; background: none; border: 1px solid var(--border);
  border-radius: 8px; padding: 6px 10px; font-size: 1.1rem; cursor: pointer; color: var(--text);
}
@media (max-width: 860px) {
  .hamburger { display: block; }
  #nav-links {
    display: none; flex-direction: column; gap: 2px;
    position: absolute; top: var(--nav-h); left: 0; right: 0;
    background: #fff; border-bottom: 1px solid var(--border);
    padding: 10px 20px; box-shadow: var(--shadow);
  }
  #nav-links.open { display: flex; }
  #nav-links a { font-size: .92rem; padding: 9px 14px; }
}

/* ============================================================
   HERO
   ============================================================ */
.hero {
  background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 55%, #1d6bf3 100%);
  color: #fff; padding: 80px 24px 72px; text-align: center; position: relative; overflow: hidden;
}
.hero::before {
  content: ''; position: absolute; inset: 0;
  background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}
.hero-inner { max-width: 800px; margin: 0 auto; position: relative; }
.hero-chips { display: flex; gap: 8px; justify-content: center; flex-wrap: wrap; margin-bottom: 20px; }
.chip {
  background: rgba(255,255,255,.15); border: 1px solid rgba(255,255,255,.25);
  color: rgba(255,255,255,.9); padding: 4px 14px; border-radius: 99px;
  font-size: .78rem; font-weight: 600; letter-spacing: .04em; text-transform: uppercase;
}
.hero h1 {
  font-size: clamp(2rem, 5.5vw, 3.5rem); font-weight: 900; line-height: 1.15;
  margin-bottom: 18px; letter-spacing: -.02em;
}
.hero h1 em { font-style: normal; color: #93c5fd; }
.hero-sub { font-size: 1.1rem; opacity: .85; max-width: 600px; margin: 0 auto 28px; }
.hero-actions { display: flex; gap: 12px; justify-content: center; flex-wrap: wrap; margin-bottom: 40px; }
.btn {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 12px 26px; border-radius: 9px; font-weight: 700;
  font-size: .92rem; cursor: pointer; border: none; transition: all .15s;
  text-decoration: none !important;
}
.btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,.2); }
.btn-white  { background: #fff; color: var(--blue); }
.btn-ghost  { background: rgba(255,255,255,.12); color: #fff; border: 1px solid rgba(255,255,255,.3); }
.btn-primary { background: var(--blue); color: #fff; }
.btn-primary:hover { background: var(--blue-dk); }
.btn-outline { background: transparent; color: var(--blue); border: 2px solid var(--blue); }
.btn-outline:hover { background: var(--blue-bg); }

.hero-stats { display: flex; align-items: center; justify-content: center; gap: 0; }
.stat { display: flex; flex-direction: column; align-items: center; padding: 0 28px; }
.stat-n { font-size: 2rem; font-weight: 900; color: #93c5fd; line-height: 1; }
.stat-l { font-size: .75rem; opacity: .7; text-transform: uppercase; letter-spacing: .06em; margin-top: 3px; }
.stat-div { width: 1px; height: 40px; background: rgba(255,255,255,.2); }
@media (max-width: 480px) { .hero-stats { gap: 0; } .stat { padding: 0 16px; } }

/* ============================================================
   SECTIONS
   ============================================================ */
.section     { padding: 80px 0; }
.section-alt { background: #fff; }
.section-label {
  display: inline-block; font-size: .72rem; font-weight: 700; letter-spacing: .1em;
  text-transform: uppercase; color: var(--blue); background: var(--blue-bg);
  padding: 3px 10px; border-radius: 99px; margin-bottom: 10px;
}
.section-title {
  font-size: clamp(1.5rem, 3vw, 2rem); font-weight: 900; letter-spacing: -.02em;
  margin-bottom: 10px; color: var(--text);
}
.section-intro { color: var(--muted); font-size: 1.05rem; max-width: 740px; margin-bottom: 36px; }

/* Callouts */
.callout { padding: 12px 16px; border-radius: 8px; margin: 14px 0; border-left: 4px solid; font-size: .94rem; }
.callout-blue   { background: var(--blue-bg);   color: #1e40af; border-color: var(--blue); }
.callout-red    { background: var(--red-bg);    color: #991b1b; border-color: var(--red); }
.callout-green  { background: var(--green-bg);  color: #14532d; border-color: var(--green); }
.callout-orange { background: var(--orange-bg); color: #7c2d12; border-color: var(--orange); }

/* ------ Real Example Balance Sheet (lesson inset) ------ */
.example-bs-card {
  background: #fff; border: 2px solid var(--border); border-radius: var(--radius);
  box-shadow: var(--shadow); margin: 28px 0 8px; overflow: hidden;
}
.example-bs-label {
  background: linear-gradient(90deg, #0f172a, #1e3a8a);
  color: #fff; font-size: .8rem; font-weight: 700; padding: 10px 20px;
  letter-spacing: .04em; text-transform: uppercase;
}
.example-bs-source {
  text-align: center; font-weight: 900; font-size: 1rem; padding: 18px 20px 4px;
  letter-spacing: -.01em;
}
.example-bs-grid {
  display: grid; grid-template-columns: 1fr 1px 1fr; padding: 0 0 4px;
}
.ex-divider { background: var(--border); margin: 16px 0; }
.ex-col { padding: 12px 24px 16px; font-size: .83rem; }
.ex-major { font-weight: 900; font-size: .9rem; letter-spacing: .08em; text-transform: uppercase; border-bottom: 2px solid; padding-bottom: 4px; margin-bottom: 8px; }
.ex-blue  { color: var(--blue);  border-color: var(--blue); }
.ex-red   { color: var(--red);   border-color: var(--red); }
.ex-green { color: var(--green); border-color: var(--green); }
.ex-subhead { font-style: italic; font-weight: 700; color: var(--muted); text-decoration: underline; margin: 6px 0 4px; font-size: .8rem; }
.ex-mt { margin-top: 14px; }
.ex-row { display: flex; justify-content: space-between; padding: 1px 0; }
.ex-row span { font-family: var(--mono); }
.ex-indent  { padding-left: 14px; }
.ex-indent2 { padding-left: 26px; color: var(--muted); }
.ex-subtotal-row {
  display: flex; justify-content: space-between; font-weight: 700;
  border-top: 1px solid var(--border); padding-top: 3px; margin-top: 3px; font-size: .82rem;
}
.ex-liab-total { border-top: 2px solid var(--border); margin-top: 8px; padding-top: 6px; }
.ex-su  { font-family: var(--mono); border-bottom: 1px solid var(--text); }
.ex-total-row {
  display: flex; justify-content: space-between; font-weight: 900;
  border-top: 2px solid var(--text); margin-top: 10px; padding-top: 6px; font-size: .85rem;
}
.ex-dbl { font-family: var(--mono); border-bottom: 3px double var(--text); padding-bottom: 1px; }
.example-bs-callouts {
  display: flex; flex-wrap: wrap; gap: 10px; padding: 14px 20px 18px;
  background: #f8fafc; border-top: 1px solid var(--border);
}
.ex-callout {
  flex: 1; min-width: 200px; border-radius: 8px; padding: 10px 14px;
  font-size: .82rem; line-height: 1.5; border-left: 3px solid;
}
.ex-callout-blue  { background: var(--blue-bg);   border-color: var(--blue);   color: #1e40af; }
.ex-callout-gold  { background: var(--gold-bg);   border-color: var(--gold);   color: #92400e; }
.ex-callout-green { background: var(--green-bg);  border-color: var(--green);  color: #14532d; }
@media (max-width: 700px) {
  .example-bs-grid { grid-template-columns: 1fr; }
  .ex-divider { height: 2px; width: 100%; margin: 0; }
}

/* Concept card (ensure visible) */
.concept-card {
  background: var(--card); border: 1px solid var(--border); border-radius: var(--radius);
  padding: 28px 32px; margin-bottom: 24px; box-shadow: var(--shadow-sm);
  border-left: 5px solid transparent;
}
.concept-card.accent-blue   { border-left-color: var(--blue); }
.concept-card.accent-red    { border-left-color: var(--red); }
.concept-card.accent-green  { border-left-color: var(--green); }
.concept-card.accent-orange { border-left-color: var(--orange); }
.concept-card.accent-purple { border-left-color: var(--purple); }
.concept-card h3 { font-size: 1.18rem; font-weight: 800; margin-bottom: 16px; }

.concept-header { display: flex; align-items: center; gap: 14px; margin-bottom: 18px; }
.concept-header h3 { margin: 0; }
.concept-icon {
  width: 44px; height: 44px; border-radius: 10px; font-size: 1.3rem;
  display: flex; align-items: center; justify-content: center; flex-shrink: 0;
}
.blue-icon   { background: var(--blue-bg);   color: var(--blue); }
.red-icon    { background: var(--red-bg);    color: var(--red); }
.green-icon  { background: var(--green-bg);  color: var(--green); }
.orange-icon { background: var(--orange-bg); color: var(--orange); }
.purple-icon { background: var(--purple-bg); color: var(--purple); }

/* Equation visual */
.equation-visual {
  display: flex; align-items: stretch; flex-wrap: wrap; gap: 8px;
  margin: 18px 0; justify-content: center;
}
.eq-tile {
  flex: 1; min-width: 160px; max-width: 260px;
  border-radius: 10px; padding: 18px 16px; text-align: center;
}
.eq-tile-label { font-size: 1.3rem; font-weight: 900; margin-bottom: 6px; }
.eq-tile-desc  { font-size: .85rem; opacity: .85; }
.eq-asset-tile  { background: var(--blue-bg); color: var(--blue); border: 2px solid var(--blue-border); }
.eq-liab-tile   { background: var(--red-bg);  color: var(--red);  border: 2px solid var(--red-border); }
.eq-equity-tile { background: var(--green-bg);color: var(--green);border: 2px solid var(--green-border); }
.eq-equals, .eq-plus { font-size: 2rem; font-weight: 900; color: var(--muted); display: flex; align-items: center; padding: 0 4px; }

/* Info grid */
.info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(210px,1fr)); gap: 16px; margin-top: 16px; }
.info-box { background: #f8fafc; border: 1px solid var(--border); border-radius: 10px; padding: 18px; }
.info-icon { font-size: 1.8rem; margin-bottom: 8px; }

/* VS Grid */
.vs-grid { display: grid; grid-template-columns: 1fr auto 1fr; gap: 0; align-items: start; margin-top: 16px; }
.vs-col { background: #f8fafc; border: 1px solid var(--border); border-radius: 10px; padding: 20px; }
.vs-classified { background: var(--blue-bg); border-color: var(--blue-border); }
.vs-badge { font-weight: 800; font-size: .9rem; margin-bottom: 12px; color: var(--muted); }
.vs-badge-highlight { color: var(--blue); }
.vs-divider {
  display: flex; align-items: center; justify-content: center;
  font-weight: 900; font-size: 1rem; color: var(--muted);
  padding: 0 16px; margin-top: 40px;
}
@media (max-width: 600px) { .vs-grid { grid-template-columns: 1fr; } .vs-divider { margin: 8px auto; } }

/* Claims diagram */
.claims-diagram { display: flex; align-items: center; gap: 16px; flex-wrap: wrap; margin: 16px 0; }
.claims-asset-box {
  background: var(--blue-bg); border: 2px solid var(--blue-border); color: var(--blue);
  border-radius: 10px; padding: 18px 22px; text-align: center; font-weight: 800; font-size: 1rem;
  flex-shrink: 0;
}
.claims-amount { display: block; font-size: 1.3rem; margin-top: 4px; }
.claims-arrow { font-size: 1.5rem; color: var(--muted); }
.claims-split { display: flex; flex-direction: column; gap: 10px; flex: 1; min-width: 200px; }
.claims-item { padding: 14px 18px; border-radius: 10px; font-size: .92rem; }
.claims-item p { margin: 4px 0 0; font-size: .85rem; opacity: .85; }
.claims-liab   { background: var(--red-bg);   border: 1px solid var(--red-border);   color: var(--red); }
.claims-equity { background: var(--green-bg); border: 1px solid var(--green-border); color: var(--green); }
.claims-plus-sign { text-align: center; font-weight: 900; color: var(--muted); }

/* OE Formula */
.oe-formula {
  display: flex; align-items: stretch; flex-wrap: wrap; gap: 8px;
  margin: 18px 0; justify-content: center;
}
.oe-tile {
  flex: 1; min-width: 140px; max-width: 200px; border-radius: 10px;
  padding: 16px; text-align: center; font-size: .92rem; font-weight: 700;
}
.oe-tile span { display: block; font-size: 1.5rem; font-weight: 900; margin-top: 6px; }
.oe-assets { background: var(--blue-bg); color: var(--blue); border: 2px solid var(--blue-border); }
.oe-liab   { background: var(--red-bg);  color: var(--red);  border: 2px solid var(--red-border); }
.oe-equity { background: var(--green-bg);color: var(--green);border: 2px solid var(--green-border); }
.oe-minus, .oe-equals { font-size: 2rem; font-weight: 900; color: var(--muted); display: flex; align-items: center; padding: 0 4px; }

.oe-components { margin-top: 20px; }
.oe-components h4 { font-size: 1rem; font-weight: 700; margin-bottom: 14px; }
.oe-comp-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px; }
.oe-increase, .oe-decrease { border-radius: 10px; padding: 14px 18px; }
.oe-increase { background: var(--green-bg); border: 1px solid var(--green-border); }
.oe-decrease { background: var(--red-bg);   border: 1px solid var(--red-border); }
.oe-comp-head { font-weight: 800; font-size: .9rem; margin-bottom: 8px; padding: 4px 10px; border-radius: 6px; display: inline-block; }
.oe-up   { background: var(--green); color: #fff; }
.oe-down { background: var(--red);   color: #fff; }
.oe-ending-formula {
  background: #f1f5f9; border: 1px solid var(--border); border-radius: 10px;
  padding: 14px 18px; font-size: .9rem; text-align: center; font-weight: 500;
}
@media (max-width: 600px) { .oe-comp-grid { grid-template-columns: 1fr; } }

/* ============================================================
   SECTION 2 — CLASSIFICATION CARDS
   ============================================================ */
.class-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
.class-card {
  background: var(--card); border: 1px solid var(--border); border-radius: var(--radius);
  padding: 26px 28px; box-shadow: var(--shadow-sm); position: relative; overflow: hidden;
}
.class-card h4 { font-size: .88rem; font-weight: 700; text-transform: uppercase; letter-spacing: .05em; color: var(--muted); margin: 14px 0 8px; }
.cc-toprow { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; }
.cc-pill {
  font-size: .88rem; font-weight: 800; padding: 5px 14px;
  border-radius: 99px; letter-spacing: .02em;
}
.blue-pill  { background: var(--blue-bg);  color: var(--blue);  }
.red-pill   { background: var(--red-bg);   color: var(--red);   }
.green-pill { background: var(--green-bg); color: var(--green); }
.cc-abbr {
  font-size: .75rem; font-weight: 800; padding: 4px 10px; border-radius: 6px;
  background: var(--blue-bg); color: var(--blue);
}
.cc-abbr-red   { background: var(--red-bg);   color: var(--red); }
.cc-abbr-green { background: var(--green-bg); color: var(--green); }
.cc-rule { display: flex; gap: 10px; align-items: flex-start; background: #f8fafc; border-radius: 8px; padding: 12px; margin-bottom: 12px; font-size: .93rem; }
.cc-rule-red   { background: var(--red-bg); }
.cc-rule-green { background: var(--green-bg); }
.rule-icon { font-size: 1.2rem; flex-shrink: 0; }
.cc-rule p { margin: 0; }
.cc-list li { margin-bottom: 5px; font-size: .92rem; }
.cc-full { grid-column: 1 / -1; }
.cc-blue  { border-top: 4px solid var(--blue); }
.cc-red   { border-top: 4px solid var(--red); }
.cc-green { border-top: 4px solid var(--green); }

/* OE Table (inside class card) */
.oe-detail-grid { display: grid; grid-template-columns: 3fr 2fr; gap: 24px; margin-top: 14px; }
.oe-table { width: 100%; border-collapse: collapse; font-size: .88rem; }
.oe-table td { padding: 6px 8px; border-bottom: 1px solid var(--border); }
.oe-table td:first-child { width: 28px; font-weight: 900; text-align: center; color: var(--muted); }
.oe-table td:last-child { color: var(--muted); font-size: .8rem; }
.tr-or td { text-align: center; color: var(--muted); border: none; padding: 4px; }
.tr-result { background: var(--green-bg); }
.tr-result td { font-weight: 700; }

@media (max-width: 740px) {
  .class-grid { grid-template-columns: 1fr; }
  .oe-detail-grid { grid-template-columns: 1fr; }
}

/* ============================================================
   SECTION 3 — FORMATTING RULES
   ============================================================ */
.fmt-rules { display: flex; flex-direction: column; gap: 0; }
.fmt-rule {
  display: flex; gap: 0; border-bottom: 1px solid var(--border);
  padding: 36px 0; align-items: flex-start;
}
.fmt-rule:last-child { border-bottom: none; }
.fmt-rule-num {
  width: 48px; height: 48px; border-radius: 50%; background: var(--blue);
  color: #fff; font-weight: 800; font-size: 1.1rem; display: flex;
  align-items: center; justify-content: center; flex-shrink: 0; margin-right: 28px; margin-top: 2px;
}
.fmt-rule-body { flex: 1; }
.fmt-rule-body h4 { font-size: 1.05rem; font-weight: 800; margin-bottom: 12px; }
.fmt-why { font-size: .88rem; color: var(--muted); margin-top: 12px; }

/* Heading demo */
.fmt-cols { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin: 14px 0; }
.fmt-example { border-radius: 8px; padding: 14px 18px; }
.fmt-example-good { background: var(--green-bg); border: 1px solid var(--green-border); }
.fmt-example-bad  { background: var(--red-bg);   border: 1px solid var(--red-border); }
.fmt-eg-label { font-size: .78rem; font-weight: 700; margin-bottom: 8px; }
.good-label { color: var(--green); }
.bad-label  { color: var(--red); }
.heading-demo    { text-align: center; font-size: .9rem; font-weight: 700; line-height: 2; }
.heading-demo-bad { text-decoration: line-through; opacity: .7; }
@media (max-width: 560px) { .fmt-cols { grid-template-columns: 1fr; } }

/* Layout diagram */
.layout-diagram { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin: 14px 0; }
.layout-left, .layout-right { border-radius: 8px; overflow: hidden; }
.layout-head { padding: 10px 14px; font-weight: 800; font-size: .9rem; text-align: center; }
.blue-head { background: var(--blue); color: #fff; }
.red-head  { background: var(--red);  color: #fff; }
.layout-content { padding: 12px 14px; background: #f8fafc; border: 1px solid var(--border); border-top: none; font-size: .88rem; line-height: 1.8; }

/* Indent demo */
.indent-demo { background: #f8fafc; border: 1px solid var(--border); border-radius: 8px; padding: 14px 18px; margin: 12px 0; font-family: var(--mono); font-size: .88rem; }
.indent-row { padding: 3px 0; }
.demo-subhead { font-weight: 700; text-decoration: underline; }
.demo-account { display: flex; justify-content: space-between; }
.demo-total   { display: flex; justify-content: space-between; font-weight: 700; margin-top: 4px; border-top: 1px solid #ccc; padding-top: 4px; }
.demo-amt     { font-family: var(--mono); }
.demo-amt-bold { font-family: var(--mono); font-weight: 700; border-bottom: 3px double #333; }

/* Dollar demo */
.dollar-demo { background: #f8fafc; border: 1px solid var(--border); border-radius: 8px; padding: 14px 18px; margin: 12px 0; font-family: var(--mono); font-size: .88rem; }
.dollar-row { display: flex; justify-content: space-between; padding: 3px 0; }
.dollar-sub { font-weight: 700; border-top: 1px solid #ccc; padding-top: 6px; margin-top: 2px; }
.da { text-align: right; }
.da-bold { font-weight: 700; }

/* Equality demo */
.equality-demo { background: #f8fafc; border: 1px solid var(--border); border-radius: 8px; padding: 18px; margin: 14px 0; text-align: center; }
.eq-demo-row { display: flex; justify-content: space-between; font-size: .92rem; font-weight: 600; padding: 4px 8px; }
.eq-demo-sep { color: var(--muted); font-size: .82rem; margin: 6px 0; }
.eq-demo-amt { font-family: var(--mono); font-weight: 800; }
.double-ul   { border-bottom: 3px double var(--text); padding-bottom: 2px; }

@media (max-width: 640px) { .fmt-rule { flex-direction: column; } .fmt-rule-num { margin-bottom: 16px; } }

/* ============================================================
   SECTION 4 — EXAMPLE BALANCE SHEET
   ============================================================ */
.legend-row { display: flex; flex-wrap: wrap; gap: 14px; margin-bottom: 18px; font-size: .85rem; align-items: center; }
.legend-item { display: flex; align-items: center; gap: 6px; }
.leg-dot { width: 10px; height: 10px; border-radius: 50%; display: inline-block; flex-shrink: 0; }
.leg-blue  { background: var(--blue); }
.leg-blue2 { background: #2196f3; }
.leg-red   { background: var(--red); }
.leg-green { background: var(--green); }
.leg-gold  { background: var(--gold); }

.bs-wrapper {
  background: #fff; border: 2px solid var(--border); border-radius: var(--radius);
  padding: 36px 32px; box-shadow: var(--shadow); overflow-x: auto;
}
.tipable { cursor: help; border-radius: 4px; transition: background .15s; }
.tipable:hover { background: #fff9c4 !important; }

/* Heading */
.bs-heading { text-align: center; margin-bottom: 28px; border-bottom: 1px solid var(--border); padding-bottom: 22px; }
.bs-hline { font-size: 1rem; font-weight: 700; line-height: 2; display: inline-block; padding: 0 8px; }

/* Columns */
.bs-columns { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; min-width: 600px; }
.bs-side { min-width: 0; }

/* Major headings */
.bs-major-head {
  font-size: 1rem; font-weight: 800; padding: 6px 4px;
  border-bottom: 2px solid; margin-bottom: 14px; display: block;
}
.blue-major { color: var(--blue); border-color: var(--blue); }
.red-major  { color: var(--red);  border-color: var(--red); }

/* Sub-headings */
.bs-sub-head { font-size: .88rem; font-weight: 700; color: var(--muted); margin: 16px 0 6px; text-decoration: underline; padding: 2px 4px; }

/* Rows */
.bs-row { display: flex; justify-content: space-between; padding: 3px 4px; font-size: .9rem; align-items: baseline; }
.bs-indent  { padding-left: 22px; }
.bs-indent2 { padding-left: 38px; }
.bs-amt { font-family: var(--mono); text-align: right; white-space: nowrap; font-size: .88rem; }
.su { border-bottom: 1px solid currentColor; }
.first-dollar::before { content: ''; }

/* Colour-coded rows */
.ca-row  { background: rgba(29,107,243,.03);  }
.lta-row { background: rgba(33,150,243,.04);  }
.cl-row  { background: rgba(217,48,37,.03);  }
.ltl-row { background: rgba(217,48,37,.04);  }
.oe-row  { background: rgba(26,127,60,.03);  }

.bs-subtotal     { font-weight: 700; margin-top: 4px; border-top: 1px solid rgba(0,0,0,.15); padding-top: 4px; }
.bs-section-total { font-weight: 800; margin-top: 8px; border-top: 2px solid rgba(0,0,0,.15); padding-top: 6px; padding-left: 4px; }
.bs-grand-total  { font-weight: 900; margin-top: 16px; border-top: 2px solid var(--text); padding-top: 10px; font-size: .95rem; }
.bs-spacer { height: 10px; }
.bs-sub-amt { }
.bs-grand-amt { border-bottom: 3px double var(--text); font-weight: 900; }

/* Balance banner */
.bs-balance-banner {
  display: flex; align-items: center; justify-content: center; gap: 12px;
  background: var(--green-bg); border: 1px solid var(--green-border); color: var(--green);
  border-radius: 10px; padding: 16px 24px; margin-top: 20px; font-size: .95rem; text-align: center; flex-wrap: wrap;
}
.bs-check {
  width: 32px; height: 32px; background: var(--green); color: #fff;
  border-radius: 50%; display: flex; align-items: center; justify-content: center;
  font-weight: 900; font-size: 1rem; flex-shrink: 0;
}

@media (max-width: 700px) { .bs-columns { grid-template-columns: 1fr; gap: 24px; } }

/* ============================================================
   SECTION 5 — DRAG & DROP
   ============================================================ */
.bank-label { font-size: .82rem; font-weight: 700; color: var(--muted); text-transform: uppercase; letter-spacing: .06em; margin-bottom: 8px; }

.practice-toolbar { display: flex; align-items: center; gap: 16px; margin-bottom: 16px; flex-wrap: wrap; }
.practice-hint { font-size: .88rem; color: var(--muted); }

.drag-bank {
  display: flex; flex-wrap: wrap; gap: 10px; padding: 20px;
  background: #fff; border: 2px dashed var(--border); border-radius: var(--radius);
  min-height: 64px; margin-bottom: 24px;
}
.drag-bank:empty::after { content: 'All accounts placed — good job!'; color: var(--muted); font-size: .88rem; margin: auto; }

.drag-item {
  padding: 8px 14px; border-radius: 8px; font-size: .82rem; font-weight: 700;
  cursor: grab; user-select: none; display: flex; align-items: center; gap: 8px;
  position: relative; transition: transform .1s, box-shadow .1s; border: 1px solid transparent;
}
.drag-item:active { cursor: grabbing; transform: scale(1.04); box-shadow: var(--shadow-lg); }
.drag-val { font-family: var(--mono); font-size: .78rem; opacity: .8; }
.drag-item[data-correct="CA"],
.drag-item[data-correct="LTA"],
.drag-item[data-correct="CL"],
.drag-item[data-correct="LTL"],
.drag-item[data-correct="OE"] {
  background: transparent; /* remove color-coding for practice */
  border-color: var(--border);
  color: var(--text);
}
.drag-item.correct-placement { box-shadow: 0 0 0 2px var(--green); }
.drag-item.wrong-placement   { box-shadow: 0 0 0 2px var(--red); animation: shake .4s; }

@keyframes shake {
  0%,100% { transform: translateX(0); }
  20%,60% { transform: translateX(-5px); }
  40%,80% { transform: translateX(5px); }
}

.drag-item .drag-tip { display: none; position: absolute; bottom: calc(100% + 10px); left: 50%;
  transform: translateX(-50%); background: #0f172a; color: #fff;
  padding: 9px 13px; border-radius: 8px; font-size: .76rem; font-weight: 400;
  width: max-content; max-width: 260px; z-index: 800; line-height: 1.5;
  pointer-events: none; box-shadow: var(--shadow-lg);
}
.drag-item .drag-tip::after {
  content: ''; position: absolute; top: 100%; left: 50%;
  transform: translateX(-50%); border: 6px solid transparent; border-top-color: #0f172a;
}
.drag-item:hover .drag-tip { display: block; }
/* Hint-visible mode: always show tips as subtle inline text under the card name */
.hints-visible .drag-item .drag-tip {
  display: block; position: static; transform: none;
  background: var(--blue-bg); color: var(--blue); border-radius: 4px;
  font-size: .7rem; padding: 3px 7px; margin-left: 4px;
  width: auto; max-width: 100%; box-shadow: none; z-index: auto;
}
.hints-visible .drag-item .drag-tip::after { display: none; }
.hints-visible .drag-item { flex-wrap: wrap; gap: 4px; align-items: flex-start; flex-direction: column; }
.hints-visible .drag-item .drag-val { margin-left: 0; }

/* Drop zones */
.drop-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 28px; margin-bottom: 20px; }
.drop-side-head { font-size: 1rem; font-weight: 800; margin-bottom: 12px; }
.blue-side-head { color: var(--blue); }
.red-side-head  { color: var(--red); }

.drop-zone {
  border: 2px dashed var(--border); border-radius: var(--radius);
  padding: 14px; margin-bottom: 14px; min-height: 80px; transition: border-color .2s, background .2s;
}
.drop-zone.drag-over { border-color: var(--blue); background: var(--blue-bg); }
.drop-zone h5 { font-size: .84rem; font-weight: 700; color: var(--muted); margin-bottom: 10px; }
.drop-list { display: flex; flex-wrap: wrap; gap: 8px; min-height: 36px; }
.subtotal-line { margin-top: 10px; font-weight: 700; font-family: var(--mono); font-size: .85rem; text-align: right; color: var(--muted); }
.total-line { font-size: 1rem; font-weight: 800; padding: 10px 16px; border-radius: 9px; text-align: right; margin-top: 4px; }
.blue-total { background: var(--blue-bg); color: var(--blue); }
.red-total  { background: var(--red-bg);  color: var(--red); }

.drag-feedback {
  padding: 16px 20px; border-radius: 9px; margin-bottom: 18px;
  font-size: .95rem; font-weight: 600; text-align: center;
}
.drag-feedback.success { background: var(--green-bg); color: var(--green); border: 1px solid var(--green-border); }
.drag-feedback.error   { background: var(--red-bg);   color: var(--red);   border: 1px solid var(--red-border); }
.drag-feedback.partial { background: var(--gold-bg);  color: #92400e;      border: 1px solid var(--gold); }

@media (max-width: 700px) { .drop-grid { grid-template-columns: 1fr; } }

/* ------ Practice Balance Sheet layout ------ */
.bank-label { font-size: .82rem; font-weight: 700; color: var(--muted); text-transform: uppercase; letter-spacing: .06em; margin-bottom: 8px; }

.pbs-wrapper {
  background: #fff; border: 2px solid var(--border); border-radius: var(--radius);
  box-shadow: var(--shadow); margin: 20px 0 28px; overflow: hidden;
}
.pbs-heading {
  text-align: center; padding: 22px 24px 16px; border-bottom: 2px solid var(--border);
  background: #fafafa;
}
.pbs-hline { display: block; line-height: 2.2; }
.pbs-co    { font-weight: 900; font-size: 1.1rem; letter-spacing: -.01em; }
.pbs-title { font-weight: 700; font-size: 1rem; text-decoration: underline; }
.pbs-date  { font-weight: 500; font-size: .9rem; color: var(--muted); text-decoration: underline; }

.pbs-body {
  display: grid; grid-template-columns: 1fr 1px 1fr;
}
.pbs-divider { background: var(--border); }
.pbs-col { padding: 24px 28px; min-width: 0; }

.pbs-major-head {
  font-size: .85rem; font-weight: 900; letter-spacing: .1em; text-transform: uppercase;
  padding-bottom: 6px; margin-bottom: 10px; border-bottom: 2px solid currentColor;
}
.pbs-blue-head  { color: var(--blue); }
.pbs-red-head   { color: var(--red); }
.pbs-green-head { color: var(--green); }

.pbs-section-head {
  font-size: .82rem; font-weight: 700; color: var(--muted); text-decoration: underline;
  margin-bottom: 6px;
}
.pbs-mt { margin-top: 18px; }

.pbs-zone {
  border: 2px dashed var(--border); border-radius: 8px;
  min-height: 64px; padding: 6px; transition: border-color .2s, background .2s;
  margin-bottom: 2px;
}
.pbs-zone.drag-over { border-color: var(--blue); background: #eef4ff; }

.pbs-drop-hint {
  color: #bbb; font-size: .78rem; text-align: center; padding: 8px 4px;
  pointer-events: none; user-select: none;
}
.pbs-zone:has(.drag-item) .pbs-drop-hint { display: none; }

.pbs-list { display: flex; flex-direction: column; gap: 2px; }
.pbs-list .drag-item {
  width: 100%; justify-content: space-between; border-radius: 5px;
  font-size: .84rem; padding: 5px 10px; cursor: grab;
}
.pbs-list .drag-val { margin-left: auto; }

/* Accounts Receivable / Accounts Payable draggable header cards */
.drag-item.drag-item-header {
  font-style: italic; font-weight: 800; letter-spacing: .01em;
  border-style: solid; opacity: .92;
}
.drag-item.drag-item-header .drag-header-label {
  font-size: .72rem; font-weight: 400; opacity: .65; font-style: normal; margin-left: 4px;
}
/* Indent A/R and A/P sub-account chips when placed in a drop zone */
.pbs-list .drag-item[data-type="AR"],
.pbs-list .drag-item[data-type="AP"] { padding-left: 22px; }

.pbs-subtotal-row {
  display: flex; justify-content: space-between; align-items: baseline;
  padding: 5px 4px 2px; font-size: .85rem; font-weight: 700;
}
.pbs-subtotal-label { color: var(--muted); font-size: .78rem; }
.pbs-subtotal-amt { font-family: var(--mono); }
.pbs-section-total-row {
  margin-top: 8px; padding-top: 8px; border-top: 1px solid var(--border);
}
.pbs-section-total-row .pbs-subtotal-label { color: var(--text); font-size: .85rem; }

.pbs-total-row {
  display: flex; justify-content: space-between; align-items: baseline;
  padding: 6px 4px 2px; margin-top: 8px; border-top: 1px solid var(--text);
  font-weight: 900; font-size: .92rem;
}
.pbs-grand .double-ul {
  font-family: var(--mono);
  border-bottom: 4px double var(--text);
  border-top: 1px solid var(--text);
  padding: 2px 2px 3px;
  display: inline-block;
}

@media (max-width: 700px) {
  .pbs-body { grid-template-columns: 1fr; }
  .pbs-divider { height: 2px; width: 100%; }
}

/* ============================================================
   SECTION 6 — COMMON MISTAKES
   ============================================================ */
.mistakes-list { display: flex; flex-direction: column; gap: 12px; max-width: 860px; }
.mistake-card {
  background: var(--card); border: 1px solid var(--border); border-radius: var(--radius);
  overflow: hidden; box-shadow: var(--shadow-sm); transition: border-color .2s;
}
.mistake-card:hover { border-color: var(--blue-border); }
.mistake-q {
  display: flex; align-items: center; gap: 14px; padding: 18px 20px;
  cursor: pointer; font-weight: 500; position: relative;
}
.mistake-q::after {
  content: '+'; position: absolute; right: 20px;
  font-size: 1.4rem; font-weight: 700; color: var(--muted); transition: transform .25s;
}
.mistake-card[data-open="true"] .mistake-q::after { content: '\2212'; }
.m-num {
  width: 30px; height: 30px; border-radius: 50%; background: var(--blue); color: #fff;
  font-size: .78rem; font-weight: 800; display: flex; align-items: center; justify-content: center; flex-shrink: 0;
}

.mistake-a { max-height: 0; overflow: hidden; transition: max-height .35s ease, padding .35s; }
.mistake-card[data-open="true"] .mistake-a { max-height: 400px; }
.mistake-inner {
  display: grid; grid-template-columns: 1fr 1fr; gap: 20px;
  padding: 20px; background: #f8fafc; border-top: 1px solid var(--border);
}
.mistake-col { padding: 14px 16px; border-radius: 9px; font-size: .9rem; }
.mist-bad  { font-weight: 800; color: var(--red);   margin-bottom: 8px; }
.mist-good { font-weight: 800; color: var(--green); margin-bottom: 8px; }
.mistake-inner .mistake-col:first-child { background: var(--red-bg);   border: 1px solid var(--red-border); }
.mistake-inner .mistake-col:last-child  { background: var(--green-bg); border: 1px solid var(--green-border); }
@media (max-width: 560px) { .mistake-inner { grid-template-columns: 1fr; } }

/* ============================================================
   SECTION 7 — QUIZ
   ============================================================ */
.quiz-questions { display: grid; gap: 20px; margin-bottom: 28px; }
.q-card {
  background: var(--card); border: 1px solid var(--border); border-radius: var(--radius);
  padding: 24px; box-shadow: var(--shadow-sm); transition: border-color .2s;
}
.q-card.correct   { border-color: var(--green); background: var(--green-bg); }
.q-card.incorrect { border-color: var(--red);   background: var(--red-bg); }
.q-text { font-weight: 700; margin-bottom: 14px; font-size: .98rem; }
.q-num  { color: var(--blue); }
.q-options { display: grid; gap: 9px; }
.q-option {
  display: flex; align-items: center; gap: 10px; padding: 11px 14px;
  border: 1px solid var(--border); border-radius: 9px; cursor: pointer;
  transition: background .12s, border-color .12s; font-size: .9rem;
}
.q-option:hover      { background: var(--blue-bg);  border-color: var(--blue-border); }
.q-option.selected   { background: var(--blue-bg);  border-color: var(--blue); }
.q-option input      { accent-color: var(--blue); }
.q-option.reveal-correct { background: var(--green-bg); border-color: var(--green); font-weight: 600; }
.q-option.reveal-wrong   { background: var(--red-bg);   border-color: var(--red); text-decoration: line-through; opacity: .7; }
.q-explain {
  display: none; margin-top: 12px; padding: 12px 14px; border-radius: 8px;
  font-size: .87rem; line-height: 1.6;
}
.q-card.correct .q-explain   { display: block; background: rgba(26,127,60,.1); color: #14532d; }
.q-card.incorrect .q-explain { display: block; background: rgba(217,48,37,.1); color: #991b1b; }

.quiz-result {
  padding: 28px; border-radius: var(--radius); text-align: center;
  font-size: 1.1rem; font-weight: 700; margin-top: 24px;
}
.quiz-result.pass { background: var(--green-bg); color: var(--green); border: 2px solid var(--green-border); }
.quiz-result.fail { background: var(--red-bg);   color: var(--red);   border: 2px solid var(--red-border); }
.score-bar { height: 10px; border-radius: 99px; background: var(--border); margin: 18px auto 0; max-width: 340px; overflow: hidden; }
.score-fill { height: 100%; border-radius: 99px; transition: width .6s cubic-bezier(.4,0,.2,1); }

/* ============================================================
   TOOLTIP
   ============================================================ */
.tooltip {
  position: fixed; z-index: 9999; background: #0f172a; color: #e2e8f0;
  padding: 10px 14px; border-radius: 9px; font-size: .82rem; max-width: 300px;
  line-height: 1.55; pointer-events: none; box-shadow: var(--shadow-lg);
}

/* ============================================================
   FOOTER
   ============================================================ */
footer {
  background: #0f172a; color: rgba(255,255,255,.55); padding: 36px 0;
  text-align: center; font-size: .88rem; line-height: 2;
}
.footer-brand { font-weight: 900; font-size: 1.1rem; color: rgba(255,255,255,.85); margin-bottom: 4px; }
.footer-small { opacity: .5; font-size: .78rem; }

/* ============================================================
   SCROLLBAR
   ============================================================ */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 99px; }

/* ============================================================
   SECTION 8 — AI QUESTIONS  (full interactive rewrite)
   ============================================================ */

/* ── Nav badge ──────────────────────────────────────────── */
.nav-ai { background: linear-gradient(90deg,#6200ea,#1d6bf3) !important; color:#fff !important; border-radius:7px; }
.nav-ai:hover { opacity:.9; }

/* ── Config bar ─────────────────────────────────────────── */
.ai-config { display:flex; flex-wrap:wrap; gap:16px 24px; align-items:flex-end; background:#fff; border:1px solid var(--border); border-radius:var(--radius); padding:20px 24px; margin-bottom:20px; box-shadow:var(--shadow-sm); }
.ai-config-group { display:flex; flex-direction:column; gap:8px; }
.ai-cfg-label { font-size:.72rem; font-weight:800; text-transform:uppercase; letter-spacing:.08em; color:var(--muted); }

.ai-type-btns { display:flex; gap:8px; flex-wrap:wrap; }
.ai-type-btn  { padding:8px 15px; border-radius:9px; border:2px solid var(--border); background:#fff; font-size:.84rem; font-weight:600; cursor:pointer; transition:all .15s; color:var(--text); }
.ai-type-btn:hover  { border-color:var(--blue); color:var(--blue); }
.ai-type-btn.active { background:var(--blue); border-color:var(--blue); color:#fff; }

.ai-diff-select { height:40px; padding:0 12px; border-radius:9px; border:2px solid var(--border); background:#fff; font-size:.9rem; font-family:var(--font); font-weight:600; color:var(--text); cursor:pointer; transition:border-color .15s; }
.ai-diff-select:focus { outline:none; border-color:var(--blue); }

.ai-generate-btn { align-self:flex-end; min-width:180px; }

/* ── API key notice ──────────────────────────────────────── */
.ai-key-notice { display:flex; align-items:flex-start; gap:12px; background:var(--gold-bg); border:1px solid var(--gold); border-radius:10px; padding:14px 18px; font-size:.88rem; margin-bottom:20px; line-height:1.6; }
.ai-kn-icon { font-size:1.1rem; flex-shrink:0; }
.ai-key-notice code { background:rgba(0,0,0,.08); padding:1px 6px; border-radius:4px; font-family:var(--mono); font-size:.82em; }

/* ── Loading ─────────────────────────────────────────────── */
.ai-loading { display:flex; flex-direction:column; align-items:center; gap:14px; padding:52px; color:var(--muted); }
.ai-spinner { width:46px; height:46px; border:4px solid var(--border); border-top-color:var(--blue); border-radius:50%; animation:ai-spin .8s linear infinite; }
@keyframes ai-spin { to { transform:rotate(360deg); } }

/* ── Question header ─────────────────────────────────────── */
.ai-q-header { background:#fff; border:1px solid var(--border); border-radius:var(--radius); padding:22px 26px; margin-bottom:16px; box-shadow:var(--shadow-sm); }
.ai-q-meta { display:flex; gap:8px; flex-wrap:wrap; margin-bottom:12px; }
.ai-q-meta-chip { display:inline-flex; align-items:center; gap:5px; font-size:.73rem; font-weight:700; padding:3px 11px; border-radius:99px; }
.ai-chip-type { background:var(--blue-bg);   color:var(--blue); }
.ai-chip-diff { background:var(--purple-bg); color:var(--purple); }
.ai-chip-co   { background:#f1f5f9;          color:var(--muted); }
.ai-q-title { font-size:1.05rem; font-weight:800; margin-bottom:8px; }
.ai-q-instructions { color:var(--muted); font-size:.92rem; line-height:1.65; }
.ai-scenario-note { background:var(--blue-bg); border-left:4px solid var(--blue); border-radius:0 8px 8px 0; padding:11px 15px; font-size:.87rem; margin-top:12px; line-height:1.6; color:#1e40af; }

/* ── Advanced notes block ────────────────────────────────── */
.ai-adv-notes-block { display:flex; flex-direction:column; gap:8px; margin-bottom:16px; }
.ai-adv-note { background:var(--orange-bg); border-left:3px solid var(--orange); border-radius:0 8px 8px 0; padding:10px 14px; font-size:.86rem; line-height:1.5; color:#7c2d12; }

/* ── Step cards ──────────────────────────────────────────── */
.ai-step-card { background:#fff; border:1px solid var(--border); border-radius:var(--radius); padding:24px; margin-bottom:16px; box-shadow:var(--shadow-sm); }
.ai-step-header { display:flex; gap:16px; align-items:flex-start; margin-bottom:18px; }
.ai-step-num { width:34px; height:34px; border-radius:50%; background:var(--blue); color:#fff; font-weight:800; font-size:.95rem; display:flex; align-items:center; justify-content:center; flex-shrink:0; }
.ai-step-title { font-size:1rem; font-weight:800; margin:0 0 4px; }
.ai-step-sub { font-size:.87rem; color:var(--muted); line-height:1.6; margin:0; }

/* ── Account classification cards ────────────────────────── */
.ai-acct-cards { display:grid; grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:10px; }
.ai-acct-card  { border-radius:10px; border:2px solid var(--border); background:#fafafa; overflow:hidden; transition:border-color .2s, box-shadow .2s; }
.ai-acct-card:hover { box-shadow:0 3px 12px rgba(0,0,0,.08); }
.ai-card-top { display:flex; justify-content:space-between; align-items:flex-start; padding:11px 14px 6px; gap:8px; }
.ai-card-name { font-weight:700; font-size:.88rem; line-height:1.35; }
.ai-card-amount { font-family:var(--mono); font-size:.88rem; font-weight:700; color:var(--blue); white-space:nowrap; }
.ai-card-note { font-size:.72rem; color:var(--muted); padding:0 14px 6px; line-height:1.4; }
.ai-card-classify { width:100%; border:none; border-top:1px solid var(--border); background:#fff; padding:7px 12px; font-family:var(--font); font-size:.82rem; color:var(--text); cursor:pointer; border-radius:0 0 8px 8px; }
.ai-card-classify:focus { outline:2px solid var(--blue); outline-offset:-2px; }

/* Classified states */
.ai-acct-card.cls-CA  { border-color:#3b82f6; background:#eff6ff; }
.ai-acct-card.cls-LTA { border-color:#0ea5e9; background:#f0f9ff; }
.ai-acct-card.cls-CL  { border-color:#ef4444; background:#fef2f2; }
.ai-acct-card.cls-LTL { border-color:#f97316; background:#fff7ed; }
.ai-acct-card.cls-OE  { border-color:#22c55e; background:#f0fdf4; }

/* Feedback states on cards */
.ai-acct-card.card-correct { border-color:#16a34a !important; background:#f0fdf4 !important; }
.ai-acct-card.card-wrong   { border-color:#dc2626 !important; background:#fef2f2 !important; }
.ai-acct-card.card-order-warn { border-color:#d97706 !important; background:#fffbeb !important; }

/* Hint badge on card */
.ai-card-hint-badge { display:inline-block; font-size:.7rem; font-weight:800; padding:2px 8px; border-radius:99px; margin:2px 14px 8px; }
.badge-CA  { background:#dbeafe; color:#1d4ed8; }
.badge-LTA { background:#e0f2fe; color:#0369a1; }
.badge-CL  { background:#fee2e2; color:#b91c1c; }
.badge-LTL { background:#ffedd5; color:#c2410c; }
.badge-OE  { background:#dcfce7; color:#15803d; }

/* Tooltip-style feedback on card */
.ai-card-feedback { font-size:.74rem; padding:4px 14px 10px; line-height:1.4; }
.ai-card-feedback.fb-good  { color:#166534; }
.ai-card-feedback.fb-bad   { color:#991b1b; }
.ai-card-feedback.fb-order { color:#92400e; }

/* ── Interactive Balance Sheet ───────────────────────────── */
.ai-bs-heading-block { text-align:center; background:#f8fafc; border:1px solid var(--border); border-radius:10px 10px 0 0; padding:16px 20px 12px; border-bottom:none; }
.ai-bs-hline { display:block; line-height:2.1; }
.ai-bs-hco   { font-weight:900; font-size:1rem; }
.ai-bs-htit  { font-weight:700; text-decoration:underline; font-size:.9rem; }
.ai-bs-hdate { font-size:.85rem; color:var(--muted); text-decoration:underline; }

.ai-interactive-bs { display:grid; grid-template-columns:1fr 2px 1fr; border:1px solid var(--border); border-radius:0 0 10px 10px; overflow:hidden; }
.ai-ibs-divider { background:var(--border); }
.ai-ibs-col { padding:0 0 16px; }

.ai-ibs-col-head { font-size:.78rem; font-weight:900; text-transform:uppercase; letter-spacing:.09em; padding:10px 18px 9px; }
.ai-head-assets { background:#eff6ff; color:#1d4ed8; border-bottom:2px solid #bfdbfe; }
.ai-head-liab   { background:#fef2f2; color:#b91c1c; border-bottom:2px solid #fecaca; }
.ai-head-equity { background:#f0fdf4; color:#15803d; border-bottom:2px solid #bbf7d0; margin-top:12px; }

.ai-ibs-section { padding:12px 18px 4px; }
.ai-ibs-sec-label { font-style:italic; font-weight:700; font-size:.78rem; color:var(--muted); text-decoration:underline; margin-bottom:6px; }

.ai-ibs-rows { min-height:36px; margin-bottom:6px; }
.ai-ibs-row { display:flex; justify-content:space-between; align-items:center; padding:3px 0; font-size:.85rem; }
.ai-ibs-row.ind1 { padding-left:14px; }
.ai-ibs-row.ind2 { padding-left:26px; color:var(--muted); font-size:.82rem; }
.ai-ibs-row-name { flex:1; }
.ai-ibs-row-amt  { font-family:var(--mono); font-size:.84rem; color:var(--muted); }
.ai-ibs-row.row-correct { color:#166534; }
.ai-ibs-row.row-wrong   { color:#991b1b; }
.ai-ibs-row.row-order   { color:#92400e; background:#fffbeb; border-radius:4px; padding-left:4px; }

.ai-empty-hint { font-size:.78rem; color:#bbb; font-style:italic; padding:4px 0; }

/* Subtotal / grand rows */
.ai-ibs-subtotal-row,
.ai-ibs-liab-total-row,
.ai-ibs-grand-row { display:flex; justify-content:space-between; align-items:center; padding:6px 18px; gap:12px; }
.ai-ibs-subtotal-row { border-top:1px dashed var(--border); margin:2px 18px 0; padding:6px 0; font-size:.85rem; font-weight:700; }
.ai-ibs-liab-total-row { border-top:2px solid var(--border); margin:8px 18px 0; padding:6px 0; font-size:.86rem; font-weight:800; }
.ai-ibs-grand-row { border-top:2px solid var(--text); margin:8px 18px 0; padding:8px 0; font-size:.88rem; font-weight:900; }

/* Amount inputs inside BS */
.ai-amt-input { width:110px; text-align:right; padding:5px 8px; border:2px solid #fde68a; border-radius:6px; background:#fffbeb; font-family:var(--mono); font-size:.84rem; font-weight:700; color:var(--text); transition:border-color .15s, background .15s; }
.ai-amt-input:focus { outline:none; border-color:#f59e0b; background:#fff; }
.ai-grand-inp { border-width:3px; border-style:double; border-color:#f59e0b; }

/* Input feedback states */
.ai-amt-input.inp-correct { border-color:#16a34a !important; background:#f0fdf4 !important; color:#166534; }
.ai-amt-input.inp-wrong   { border-color:#dc2626 !important; background:#fef2f2 !important; color:#991b1b; }

/* ── Action buttons ──────────────────────────────────────── */
.ai-actions { display:flex; gap:10px; flex-wrap:wrap; margin:18px 0; }
.btn-subtle  { background:#f1f5f9; color:var(--text); border:1px solid var(--border); padding:9px 18px; border-radius:9px; font-size:.88rem; font-weight:600; cursor:pointer; transition:background .15s; }
.btn-subtle:hover { background:#e2e8f0; }

/* ── Feedback panel ──────────────────────────────────────── */
.ai-feedback-panel { border-radius:var(--radius); overflow:hidden; margin-top:4px; }
.ai-fb-header { padding:14px 20px; font-weight:800; font-size:.95rem; display:flex; flex-direction:column; gap:6px; }
.ai-fb-header.fb-pass { background:#dcfce7; color:#15803d; border-bottom:1px solid #bbf7d0; }
.ai-fb-header.fb-fail { background:#fee2e2; color:#b91c1c; border-bottom:1px solid #fecaca; }
.ai-fb-header.fb-loading { background:#eff6ff; color:#1d4ed8; border-bottom:1px solid #bfdbfe; flex-direction:row; align-items:center; }
.ai-fb-score { font-size:1.1rem; font-weight:900; }
.ai-fb-summary { font-size:.88rem; font-weight:500; opacity:.85; }
.ai-fb-items { background:#fff; border:1px solid var(--border); border-top:none; }
.ai-fb-item  { display:flex; gap:12px; align-items:flex-start; padding:10px 16px; border-bottom:1px solid #f1f5f9; font-size:.86rem; line-height:1.5; }
.ai-fb-item:last-child { border-bottom:none; }
.ai-fb-icon  { font-size:1rem; flex-shrink:0; margin-top:1px; font-weight:900; }
.ai-fb-text  { flex:1; }
.ai-fb-balance { padding:12px 20px; font-weight:700; font-size:.9rem; border-top:2px solid var(--border); display:flex; align-items:center; gap:10px; background:#f8fafc; }
.ai-fb-balance.fb-balanced   { color:#166534; }
.ai-fb-balance.fb-unbalanced { color:#991b1b; }

/* AI error-finding grouped feedback */
.ai-err-panel .ai-fb-header { align-items:flex-start; }
.ai-fb-group { background:#fff; border:1px solid var(--border); border-top:none; }
.ai-fb-group + .ai-fb-group { border-top:none; }
.ai-fb-group-label {
  font-size:.72rem; font-weight:800; text-transform:uppercase; letter-spacing:.07em;
  padding:7px 16px; border-bottom:1px solid var(--border);
}
.ai-fb-glabel-yes     { background:#dcfce7; color:#166534; }
.ai-fb-glabel-partial { background:#fff7ed; color:#9a3412; }
.ai-fb-glabel-no      { background:#fee2e2; color:#b91c1c; }
.ai-fb-glabel-miss    { background:#f0f9ff; color:#0369a1; }

.ai-fb-correct .ai-fb-icon { color:var(--green); }
.ai-fb-partial .ai-fb-icon { color:var(--orange); }
.ai-fb-wrong   .ai-fb-icon { color:var(--red); }
.ai-fb-miss    .ai-fb-icon { color:#0369a1; font-style:normal; }
.ai-fb-explain { font-size:.8rem; color:var(--muted); margin-top:3px; line-height:1.5; }

/* Spinner */
.ai-fb-spinner {
  display:inline-block; width:16px; height:16px;
  border:2px solid #bfdbfe; border-top-color:#1d6bf3;
  border-radius:50%; animation:spin .7s linear infinite; flex-shrink:0;
}
@keyframes spin { to { transform:rotate(360deg); } }

/* Error finding feedback */
.ai-err-fb-score { display:inline-block; font-size:1.1rem; font-weight:900; }

/* ── Rendered Balance Sheet (solution / error-finding view) ── */
.ai-bs-wrap { border:1px solid var(--border); border-radius:var(--radius); overflow:hidden; margin:4px 0; }
.ai-bs-heading { text-align:center; padding:18px 20px 14px; background:#f8fafc; border-bottom:1px solid var(--border); }
.ai-bs-hline { display:block; line-height:2.1; }
.ai-bs-co    { font-weight:900; font-size:1rem; }
.ai-bs-title { font-weight:700; text-decoration:underline; font-size:.9rem; }
.ai-bs-date  { font-weight:500; font-size:.85rem; color:var(--muted); text-decoration:underline; }
.ai-bs-body  { display:grid; grid-template-columns:1fr 2px 1fr; }
.ai-bs-div   { background:var(--border); }
.ai-bs-side  { padding:16px 20px; font-size:.84rem; }
.ai-bs-major { font-weight:900; font-size:.8rem; letter-spacing:.08em; text-transform:uppercase; border-bottom:2px solid; padding-bottom:4px; margin-bottom:8px; margin-top:4px; }
.ai-bs-blue  { color:var(--blue); border-color:var(--blue); }
.ai-bs-red   { color:var(--red);  border-color:var(--red); }
.ai-bs-green { color:var(--green);border-color:var(--green); }
.ai-bs-subhead { font-style:italic; font-weight:700; color:var(--muted); text-decoration:underline; margin:8px 0 4px; font-size:.8rem; }
.ai-bs-row   { display:flex; justify-content:space-between; padding:2px 0; }
.ai-bs-row.i1 { padding-left:14px; }
.ai-bs-row.i2 { padding-left:26px; color:var(--muted); font-size:.82rem; }
.ai-bs-amt   { font-family:var(--mono); }
.ai-bs-subtot { display:flex; justify-content:space-between; font-weight:700; border-top:1px solid var(--border); padding-top:3px; margin-top:3px; }
.ai-bs-sectot { display:flex; justify-content:space-between; font-weight:800; border-top:2px solid var(--border); padding-top:6px; margin-top:8px; }
.ai-bs-grand  { display:flex; justify-content:space-between; font-weight:900; border-top:2px solid var(--text); padding-top:8px; margin-top:10px; font-size:.88rem; }
.ai-bs-dbl    { font-family:var(--mono); border-bottom:3px double var(--text); padding-bottom:1px; }
.ai-bs-su     { font-family:var(--mono); border-bottom:1px solid currentColor; }
.ai-bs-mt     { margin-top:14px; }
@media (max-width:640px) { .ai-bs-body { grid-template-columns:1fr; } .ai-bs-div { height:2px; } }
@media (max-width:640px) { .ai-interactive-bs { grid-template-columns:1fr; } .ai-ibs-divider { height:2px; } }

/* ── Solution panel ──────────────────────────────────────── */
.ai-solution  { border:2px solid var(--green-border); border-radius:var(--radius); background:var(--green-bg); overflow:hidden; margin-top:8px; }
.ai-sol-header { display:flex; align-items:center; gap:12px; padding:16px 24px; background:var(--green); color:#fff; }
.ai-sol-icon   { font-size:1.4rem; }
.ai-sol-header h4 { font-size:1rem; font-weight:800; margin:0; }
.ai-sol-bs     { padding:16px 20px; }
.ai-errors-reveal { padding:0 20px 16px; }
.ai-error-item  { display:flex; gap:14px; padding:12px 16px; border-radius:9px; background:#fff; border:1px solid var(--green-border); margin-bottom:8px; }
.ai-err-num     { width:26px; height:26px; border-radius:50%; background:var(--red); color:#fff; font-size:.75rem; font-weight:800; display:flex; align-items:center; justify-content:center; flex-shrink:0; }
.ai-err-body    { flex:1; font-size:.88rem; line-height:1.55; }
.ai-err-loc     { font-weight:700; color:var(--red); margin-bottom:3px; }
.ai-err-fix     { color:var(--green); margin-top:4px; font-weight:600; }
.ai-check-banner { display:flex; align-items:center; justify-content:center; gap:10px; padding:14px 24px; font-weight:700; font-size:.95rem; border-top:1px solid var(--green-border); }
.ai-check-pass  { color:var(--green); }
.ai-check-fail  { color:var(--red); }

/* ── Textarea ────────────────────────────────────────────── */
.ai-textarea { width:100%; border:2px solid var(--border); border-radius:9px; padding:14px 16px; font-family:var(--font); font-size:.9rem; resize:vertical; transition:border-color .15s; margin-top:8px; box-sizing:border-box; line-height:1.7; }
.ai-textarea:focus { outline:none; border-color:var(--blue); }

/* ── Error message ───────────────────────────────────────── */
.ai-error-msg { background:var(--red-bg); border:1px solid var(--red-border); color:var(--red); border-radius:9px; padding:14px 18px; font-size:.9rem; margin-top:14px; }

/* ============================================================
   PRINT
   ============================================================ */
@media print {
  #topnav, .hero, #readingProgress, #practice, #mistakes, #quiz, footer, .btn { display: none; }
  .section { padding: 20px 0; }
  body { font-size: 11px; }
  .bs-wrapper { box-shadow: none; border: 1px solid #ccc; }
}

/* ---------- Design tokens ---------- */
:root {
  --blue:    #1d6bf3;
  --blue-bg: #e8f0fe;
  --blue-border: #b3d1ff;
  --red:     #d93025;
  --red-bg:  #fde8e8;
  --red-border: #f5b7b7;
  --green:   #1e8e3e;
  --green-bg:#e6f4ea;
  --green-border:#a8dab5;
  --bg:      #f5f7fa;
  --card:    #ffffff;
  --text:    #1a1a2e;
  --muted:   #5f6b7a;
  --border:  #dfe3e8;
  --radius:  10px;
  --shadow:  0 2px 12px rgba(0,0,0,.06);
  --font:    'Inter', 'Segoe UI', system-ui, sans-serif;
  --mono:    'JetBrains Mono', 'Consolas', monospace;
  --nav-h:   56px;
}

/* ---------- Reset ---------- */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; scroll-padding-top: calc(var(--nav-h) + 12px); }
body {
  font-family: var(--font);
  background: var(--bg);
  color: var(--text);
  line-height: 1.65;
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
}
img { max-width: 100%; }
a { color: var(--blue); text-decoration: none; }
a:hover { text-decoration: underline; }
ul, ol { padding-left: 1.4em; }

/* ---------- Utility ---------- */
.container { max-width: 1120px; margin: 0 auto; padding: 0 24px; }
.hidden { display: none !important; }
.badge { background: var(--blue); color: #fff; font-size: .7em; padding: 2px 8px; border-radius: 999px; vertical-align: middle; margin-left: 6px; }

/* Inline tags */
.tag-asset  { background: var(--blue-bg); color: var(--blue); padding: 1px 6px; border-radius: 4px; font-weight: 600; }
.tag-liab   { background: var(--red-bg); color: var(--red); padding: 1px 6px; border-radius: 4px; font-weight: 600; }
.tag-equity { background: var(--green-bg); color: var(--green); padding: 1px 6px; border-radius: 4px; font-weight: 600; }

/* ============================================================
   NAVIGATION
   ============================================================ */
#topnav {
  position: sticky; top: 0; z-index: 900;
  background: rgba(255,255,255,.92);
  backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--border);
  height: var(--nav-h);
}
.nav-inner {
  max-width: 1120px; margin: 0 auto; padding: 0 24px;
  display: flex; align-items: center; height: 100%;
}
.brand { font-weight: 800; font-size: 1.1rem; color: var(--text); margin-right: auto; }
.brand span { color: var(--blue); }
#nav-links { list-style: none; display: flex; gap: 6px; padding: 0; }
#nav-links li a {
  display: block; padding: 6px 12px; border-radius: 6px;
  font-size: .88rem; font-weight: 500; color: var(--muted);
  transition: background .15s, color .15s;
}
#nav-links li a:hover, #nav-links li a.active { background: var(--blue-bg); color: var(--blue); text-decoration: none; }
.hamburger { display: none; background: none; border: none; font-size: 1.6rem; cursor: pointer; color: var(--text); }

/* Mobile nav */
@media (max-width: 820px) {
  .hamburger { display: block; }
  #nav-links {
    display: none; flex-direction: column; position: absolute;
    top: var(--nav-h); left: 0; right: 0;
    background: #fff; border-bottom: 1px solid var(--border);
    padding: 12px 24px; gap: 2px;
  }
  #nav-links.open { display: flex; }
}

/* ============================================================
   HERO
   ============================================================ */
.hero {
  background: linear-gradient(135deg, #1d6bf3 0%, #0d47a1 100%);
  color: #fff; padding: 80px 24px 64px; text-align: center;
}
.hero-inner { max-width: 780px; margin: 0 auto; }
.hero-tag { font-size: .85rem; letter-spacing: .08em; text-transform: uppercase; opacity: .8; margin-bottom: 12px; }
.hero h1 { font-size: clamp(2rem, 5vw, 3.2rem); line-height: 1.2; margin-bottom: 16px; }
.hero h1 em { font-style: normal; color: #90caf9; }
.hero-sub { font-size: 1.1rem; opacity: .85; margin-bottom: 28px; }

/* Buttons */
.btn {
  display: inline-block; padding: 12px 28px; border-radius: 8px;
  font-weight: 600; font-size: .95rem; cursor: pointer; border: none;
  transition: transform .12s, box-shadow .12s;
}
.btn:hover { transform: translateY(-1px); box-shadow: 0 4px 14px rgba(0,0,0,.15); text-decoration: none; }
.btn-primary { background: #fff; color: var(--blue); }
.btn-outline { background: transparent; border: 2px solid var(--blue); color: var(--blue); }
.btn-outline:hover { background: var(--blue-bg); }
.btn-success { background: var(--green); color: #fff; }

/* ============================================================
   SECTIONS
   ============================================================ */
.section { padding: 72px 0; }
.section-alt { background: #fff; }
.section-title {
  font-size: 1.75rem; font-weight: 800; margin-bottom: 8px;
  display: flex; align-items: center; gap: 10px;
}
.section-intro { color: var(--muted); margin-bottom: 32px; font-size: 1.05rem; max-width: 760px; }

/* ============================================================
   CONCEPT CARDS  (Section 1)
   ============================================================ */
.concept-card {
  background: var(--card); border: 1px solid var(--border); border-radius: var(--radius);
  padding: 28px 32px; margin-bottom: 24px; box-shadow: var(--shadow);
}
.concept-card h3 { font-size: 1.2rem; margin-bottom: 10px; }
.concept-card.accent-blue  { border-left: 5px solid var(--blue); }
.concept-card.accent-red   { border-left: 5px solid var(--red); }
.concept-card.accent-green { border-left: 5px solid var(--green); }

/* Equation box */
.equation-box {
  display: flex; align-items: center; justify-content: center; flex-wrap: wrap;
  gap: 12px; padding: 20px; margin: 16px 0;
  background: #f0f4f9; border-radius: 8px; font-size: 1.25rem; font-weight: 700;
}
.equation-box.small { font-size: 1rem; padding: 14px; }
.eq-sign { font-size: 1.4em; color: var(--muted); }
.eq-part  { padding: 6px 16px; border-radius: 6px; }
.eq-asset  { background: var(--blue-bg);  color: var(--blue); }
.eq-liab   { background: var(--red-bg);   color: var(--red); }
.eq-equity { background: var(--green-bg); color: var(--green); }

.example-note { background: #fffbe6; border-left: 4px solid #f9a825; padding: 10px 14px; border-radius: 6px; margin: 12px 0; }

/* Comparison grid */
.comparison-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 14px; }
.compare-col { padding: 18px; border-radius: 8px; background: #f9fafb; border: 1px solid var(--border); }
.compare-col h4 { margin-bottom: 8px; }
.highlight-col { background: var(--blue-bg); border-color: var(--blue-border); }
@media (max-width: 640px) { .comparison-grid { grid-template-columns: 1fr; } }

/* ============================================================
   CLASSIFICATION CARDS  (Section 2)
   ============================================================ */
.class-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
.class-card {
  background: var(--card); border-radius: var(--radius); padding: 28px 28px 24px;
  border: 1px solid var(--border); box-shadow: var(--shadow); position: relative;
}
.class-card h3 { margin-bottom: 8px; }
.class-card h4 { margin-top: 14px; margin-bottom: 6px; font-size: .95rem; text-transform: uppercase; letter-spacing: .04em; color: var(--muted); }
.class-icon {
  position: absolute; top: -14px; right: 20px;
  width: 42px; height: 42px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-weight: 800; font-size: .8rem; color: #fff;
}
.blue-card  { border-top: 4px solid var(--blue); }
.blue-card .class-icon  { background: var(--blue); }
.red-card   { border-top: 4px solid var(--red); }
.red-card .class-icon   { background: var(--red); }
.green-card { border-top: 4px solid var(--green); }
.green-card .class-icon { background: var(--green); }
.full-width-card { grid-column: 1 / -1; }

.equity-detail-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 12px; }
@media (max-width: 640px) {
  .class-grid { grid-template-columns: 1fr; }
  .equity-detail-grid { grid-template-columns: 1fr; }
}

/* ============================================================
   RULES GRID  (Section 3)
   ============================================================ */
.rules-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 20px; }
.rule-card {
  background: var(--card); border: 1px solid var(--border); border-radius: var(--radius);
  padding: 22px 24px; box-shadow: var(--shadow); position: relative;
}
.rule-num {
  position: absolute; top: -12px; left: 16px;
  background: var(--blue); color: #fff; width: 28px; height: 28px;
  border-radius: 50%; display: flex; align-items: center; justify-content: center;
  font-weight: 700; font-size: .82rem;
}
.rule-card h4 { margin-bottom: 6px; margin-top: 4px; }

/* ============================================================
   EXAMPLE BALANCE SHEET  (Section 4)
   ============================================================ */
.bs-wrapper {
  background: #fff; border: 2px solid var(--border); border-radius: var(--radius);
  padding: 32px 28px; box-shadow: var(--shadow); overflow-x: auto;
}
.bs-heading { text-align: center; margin-bottom: 24px; }
.bs-heading .bs-line {
  font-weight: 700; font-size: 1.05rem; cursor: help;
  transition: background .15s; padding: 2px 8px; border-radius: 4px;
}
.bs-heading .bs-line:hover { background: #fff3cd; }
.bs-columns { display: grid; grid-template-columns: 1fr 1fr; gap: 32px; }

.bs-side { min-width: 0; }
.bs-section-head {
  font-size: 1.05rem; border-bottom: 2px solid var(--text); padding-bottom: 4px;
  margin-bottom: 10px; cursor: help;
}
.bs-left .bs-section-head { color: var(--blue); border-color: var(--blue); }
.bs-right .bs-section-head { color: var(--red); border-color: var(--red); }

.bs-sub-head {
  font-size: .9rem; font-weight: 700; margin: 16px 0 6px; color: var(--muted);
  cursor: help; padding: 2px 4px; border-radius: 4px; transition: background .15s;
}
.bs-sub-head:hover { background: #fff3cd; }

.bs-row {
  display: flex; justify-content: space-between; padding: 3px 0;
  font-size: .92rem; cursor: help; border-radius: 4px; padding-left: 4px; padding-right: 4px;
  transition: background .15s;
}
.bs-row:hover { background: #fff3cd; }
.bs-row.indent { padding-left: 22px; }
.amt { font-family: var(--mono); text-align: right; white-space: nowrap; }
.first-amt::before { content: ''; }
.underline-single { border-bottom: 1px solid var(--text); padding-bottom: 1px; }
.double-underline { border-bottom: 3px double var(--text); padding-bottom: 2px; font-weight: 700; }

.bs-row.subtotal { font-weight: 600; margin-top: 2px; }
.bs-row.section-subtotal { font-weight: 700; margin-top: 6px; border-top: 1px solid var(--border); padding-top: 6px; }
.bs-row.grand-total { font-weight: 800; font-size: 1rem; margin-top: 12px; border-top: 2px solid var(--text); padding-top: 8px; }
.bs-row.last-item { }

.balance-check-banner {
  margin-top: 20px; padding: 14px 20px; border-radius: 8px; font-size: .95rem; text-align: center;
}
.balance-check-banner.balanced { background: var(--green-bg); color: var(--green); border: 1px solid var(--green-border); }
.balance-check-banner.unbalanced { background: var(--red-bg); color: var(--red); border: 1px solid var(--red-border); }

@media (max-width: 700px) {
  .bs-columns { grid-template-columns: 1fr; gap: 24px; }
}

/* ============================================================
   DRAG & DROP  (Section 5)
   ============================================================ */
.drag-bank {
  display: flex; flex-wrap: wrap; gap: 10px; margin: 20px 0 28px;
  padding: 20px; background: #fff; border: 2px dashed var(--border); border-radius: var(--radius);
  min-height: 60px;
}
.drag-item {
  padding: 8px 16px; border-radius: 8px; font-size: .88rem; font-weight: 600;
  cursor: grab; user-select: none; transition: transform .1s, box-shadow .1s;
  display: flex; align-items: center; gap: 8px;
  position: relative;
}
.drag-item:active { cursor: grabbing; transform: scale(1.05); box-shadow: 0 4px 16px rgba(0,0,0,.15); }
.drag-item .drag-val { font-family: var(--mono); font-size: .8rem; opacity: .7; }

/* Drop zones */
.drop-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 28px; margin-bottom: 24px; }
.drop-side h4 { font-size: 1.1rem; margin-bottom: 12px; }
.drop-zone {
  border: 2px dashed var(--border); border-radius: var(--radius);
  padding: 14px; margin-bottom: 14px; min-height: 90px; transition: border-color .2s, background .2s;
}
.drop-zone.drag-over { border-color: var(--blue); background: rgba(29,107,243,.04); }
.drop-zone h5 { font-size: .9rem; color: var(--muted); margin-bottom: 8px; }
.drop-list { display: flex; flex-wrap: wrap; gap: 8px; min-height: 36px; }
.subtotal-line { margin-top: 10px; font-weight: 700; font-family: var(--mono); font-size: .88rem; text-align: right; }
.total-line {
  font-size: 1.05rem; font-weight: 800; padding: 10px 14px;
  border-radius: 8px; text-align: right; margin-top: 4px;
}
.blue-total { background: var(--blue-bg); color: var(--blue); }
.red-total  { background: var(--red-bg);  color: var(--red); }

.drag-feedback {
  padding: 16px 20px; border-radius: 8px; margin-bottom: 18px;
  font-size: .95rem; font-weight: 600; text-align: center;
}
.drag-feedback.success { background: var(--green-bg); color: var(--green); border: 1px solid var(--green-border); }
.drag-feedback.error   { background: var(--red-bg);   color: var(--red);   border: 1px solid var(--red-border); }
.drag-feedback.partial { background: #fff3cd; color: #856404; border: 1px solid #ffe69c; }

.drag-item.correct-placement { outline: 2px solid var(--green); outline-offset: 1px; }
.drag-item.wrong-placement   { outline: 2px solid var(--red);   outline-offset: 1px; animation: shake .35s; }

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20%, 60% { transform: translateX(-4px); }
  40%, 80% { transform: translateX(4px); }
}

@media (max-width: 700px) { .drop-grid { grid-template-columns: 1fr; } }

/* Hover tooltip for drag items */
.drag-item .drag-tip {
  display: none; position: absolute; bottom: calc(100% + 8px); left: 50%;
  transform: translateX(-50%); background: #1a1a2e; color: #fff;
  padding: 8px 12px; border-radius: 6px; font-size: .78rem; font-weight: 400;
  width: max-content; max-width: 260px; z-index: 800; text-align: left;
  pointer-events: none; line-height: 1.45;
}
.drag-item .drag-tip::after {
  content: ''; position: absolute; top: 100%; left: 50%; transform: translateX(-50%);
  border: 6px solid transparent; border-top-color: #1a1a2e;
}
.drag-item:hover .drag-tip { display: block; }

/* ============================================================
   COMMON MISTAKES  (Section 6)
   ============================================================ */
.mistakes-grid { display: grid; gap: 14px; max-width: 800px; }
.mistake-card {
  background: var(--card); border: 1px solid var(--border); border-radius: var(--radius);
  overflow: hidden; box-shadow: var(--shadow); cursor: pointer; transition: border-color .2s;
}
.mistake-card:hover { border-color: var(--blue-border); }
.mistake-q {
  padding: 16px 20px; font-weight: 600; display: flex; align-items: center; gap: 12px;
  position: relative;
}
.mistake-q::after {
  content: '+'; position: absolute; right: 20px; font-size: 1.3rem; font-weight: 700;
  color: var(--muted); transition: transform .2s;
}
.mistake-card[data-open="true"] .mistake-q::after { content: '\2212'; }
.m-num {
  display: inline-flex; align-items: center; justify-content: center;
  width: 28px; height: 28px; border-radius: 50%; background: var(--blue); color: #fff;
  font-size: .78rem; flex-shrink: 0;
}
.mistake-a {
  max-height: 0; overflow: hidden; transition: max-height .35s ease, padding .35s ease;
  padding: 0 20px; background: #f9fafb; border-top: 1px solid transparent;
}
.mistake-card[data-open="true"] .mistake-a {
  max-height: 400px; padding: 16px 20px; border-top-color: var(--border);
}
.mistake-a p { margin-bottom: 8px; }

/* ============================================================
   QUIZ  (Section 7)
   ============================================================ */
.quiz-questions { display: grid; gap: 20px; margin-bottom: 24px; }
.q-card {
  background: var(--card); border: 1px solid var(--border); border-radius: var(--radius);
  padding: 22px 24px; box-shadow: var(--shadow);
}
.q-card.correct  { border-color: var(--green); background: var(--green-bg); }
.q-card.incorrect { border-color: var(--red);   background: var(--red-bg); }
.q-text { font-weight: 600; margin-bottom: 12px; }
.q-num { color: var(--blue); margin-right: 6px; }
.q-options { display: grid; gap: 8px; }
.q-option {
  display: flex; align-items: center; gap: 10px;
  padding: 10px 14px; border: 1px solid var(--border); border-radius: 8px;
  cursor: pointer; transition: background .12s, border-color .12s; font-size: .92rem;
}
.q-option:hover { background: var(--blue-bg); border-color: var(--blue-border); }
.q-option input { accent-color: var(--blue); }
.q-option.selected { background: var(--blue-bg); border-color: var(--blue); }
.q-option.reveal-correct { background: var(--green-bg); border-color: var(--green); }
.q-option.reveal-wrong   { background: var(--red-bg);   border-color: var(--red); }
.q-explain { margin-top: 10px; font-size: .88rem; padding: 10px 14px; border-radius: 6px; display: none; }
.q-card.correct .q-explain,
.q-card.incorrect .q-explain { display: block; }
.q-card.correct .q-explain   { background: #e6f4ea; color: var(--green); }
.q-card.incorrect .q-explain { background: #fde8e8; color: var(--red); }

.quiz-result {
  padding: 24px; border-radius: var(--radius); text-align: center; font-size: 1.1rem; font-weight: 700;
}
.quiz-result.pass { background: var(--green-bg); color: var(--green); border: 2px solid var(--green-border); }
.quiz-result.fail { background: var(--red-bg);   color: var(--red);   border: 2px solid var(--red-border); }
.score-bar { height: 10px; border-radius: 99px; background: var(--border); margin: 14px auto 0; max-width: 320px; overflow: hidden; }
.score-fill { height: 100%; border-radius: 99px; transition: width .5s ease; }

/* ============================================================
   TOOLTIP (for balance sheet hover)
   ============================================================ */
.tooltip {
  position: fixed; z-index: 9999; background: #1a1a2e; color: #fff;
  padding: 10px 14px; border-radius: 8px; font-size: .82rem; max-width: 300px;
  line-height: 1.5; pointer-events: none; box-shadow: 0 4px 20px rgba(0,0,0,.25);
}

/* ============================================================
   FOOTER
   ============================================================ */
footer {
  background: #1a1a2e; color: rgba(255,255,255,.6); padding: 24px 0; text-align: center; font-size: .85rem;
}

/* ============================================================
   SCROLLBAR (subtle)
   ============================================================ */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #c4c9d1; border-radius: 99px; }

/* ============================================================
   PRINT
   ============================================================ */
@media print {
  #topnav, .hero, #practice, #mistakes, #quiz, footer, .btn { display: none; }
  .section { padding: 24px 0; }
  body { font-size: 12px; }
}

/* ============================================================
   SECTION 9 — CUE CARDS
   ============================================================ */

/* Nav link */
#nav-links a.nav-cue { color: var(--purple); font-weight: 600; }
#nav-links a.nav-cue:hover { color: var(--purple); opacity: .8; }

/* Toolbar */
.cc-toolbar {
  display: flex; align-items: center; justify-content: space-between;
  flex-wrap: wrap; gap: 14px; margin-bottom: 18px;
}
.cc-modes { display: flex; gap: 8px; }
.cc-mode-btn {
  padding: 8px 18px; border-radius: 99px; border: 2px solid var(--border);
  background: var(--card); color: var(--muted); font-size: .88rem; font-weight: 600;
  cursor: pointer; transition: all .18s; display: flex; align-items: center; gap: 6px;
}
.cc-mode-btn.active, .cc-mode-btn:hover {
  border-color: var(--purple); background: var(--purple-bg); color: var(--purple);
}
.cc-missed-badge {
  display: inline-flex; align-items: center; justify-content: center;
  background: var(--red); color: #fff; border-radius: 99px;
  font-size: .72rem; font-weight: 700; min-width: 18px; height: 18px; padding: 0 5px;
}

/* Stats row */
.cc-stats { display: flex; align-items: center; gap: 10px; }
.cc-stat { display: flex; flex-direction: column; align-items: center; gap: 1px; }
.cc-stat-n { font-size: 1.3rem; font-weight: 800; color: var(--text); line-height: 1; }
.cc-stat-l { font-size: .7rem; font-weight: 600; color: var(--muted); text-transform: uppercase; letter-spacing: .04em; }
.cc-stat-yes .cc-stat-n { color: var(--green); }
.cc-stat-no  .cc-stat-n { color: var(--red); }
.cc-stat-div { width: 1px; height: 32px; background: var(--border); }

/* Progress */
.cc-progress-track {
  height: 6px; background: var(--border); border-radius: 99px;
  overflow: hidden; margin-bottom: 6px;
}
.cc-progress-fill {
  height: 100%; width: 0%; background: var(--purple);
  border-radius: 99px; transition: width .4s ease;
}
.cc-progress-label {
  font-size: .78rem; color: var(--muted); font-weight: 500; margin-bottom: 24px;
}

/* Card stage */
.cc-stage { max-width: 680px; margin: 0 auto; }

/* The card itself */
.cc-card {
  background: var(--card); border: 2px solid var(--border);
  border-radius: 20px; padding: 36px 40px 32px;
  box-shadow: var(--shadow-lg); min-height: 220px;
  position: relative; transition: box-shadow .2s;
}
.cc-card:hover { box-shadow: 0 12px 48px rgba(0,0,0,.14); }

.cc-card-type {
  display: inline-block; font-size: .72rem; font-weight: 700;
  text-transform: uppercase; letter-spacing: .08em;
  background: var(--purple-bg); color: var(--purple);
  border-radius: 99px; padding: 3px 12px; margin-bottom: 18px;
}
.cc-card-type[data-cat="Definition"]       { background: var(--blue-bg);   color: var(--blue); }
.cc-card-type[data-cat="Classification"]   { background: var(--orange-bg); color: var(--orange); }
.cc-card-type[data-cat="Ordering"]         { background: var(--green-bg);  color: var(--green); }
.cc-card-type[data-cat="Equation"]         { background: var(--purple-bg); color: var(--purple); }
.cc-card-type[data-cat="Formatting"]       { background: var(--gold-bg);   color: #b45309; }
.cc-card-type[data-cat="Error Spotting"]   { background: var(--red-bg);    color: var(--red); }

.cc-card-q {
  font-size: 1.22rem; font-weight: 600; color: var(--text);
  line-height: 1.55; margin-bottom: 10px;
}
.cc-card-hint {
  font-size: .83rem; color: var(--muted); font-style: italic;
  margin-bottom: 6px; min-height: 20px;
}

/* Answer (hidden until revealed) */
.cc-card-answer {
  display: none; margin-top: 20px; padding-top: 20px;
  border-top: 1.5px solid var(--border); animation: ccFadeIn .3s ease;
}
.cc-card-answer.visible { display: block; }
@keyframes ccFadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: none; } }

.cc-answer-label {
  font-size: .72rem; font-weight: 700; text-transform: uppercase; letter-spacing: .08em;
  color: var(--muted); margin-bottom: 10px;
}
.cc-card-a {
  font-size: .97rem; color: var(--text); line-height: 1.65;
}
.cc-card-a strong { color: var(--blue); }
.cc-card-a .cc-correct { color: var(--green); font-weight: 700; }
.cc-card-a .cc-wrong  { color: var(--red); font-weight: 700; }
.cc-card-a ul { margin: 8px 0 0 20px; }
.cc-card-a li { margin-bottom: 4px; }
.cc-card-a .cc-mono {
  font-family: var(--mono); background: #f1f5f9;
  padding: 2px 7px; border-radius: 4px; font-size: .88em;
}
.cc-card-a .cc-eq {
  display: block; font-family: var(--mono);
  background: var(--blue-bg); border-radius: 8px;
  padding: 10px 14px; margin: 10px 0 4px; font-size: .95rem;
  border-left: 3px solid var(--blue);
}

/* Action bar */
.cc-actions { margin-top: 22px; display: flex; flex-direction: column; align-items: center; gap: 12px; }
.cc-reveal-btn { min-width: 200px; font-size: 1rem; padding: 12px 32px; border-radius: 99px; }

.cc-judge {
  display: flex; gap: 12px; width: 100%; max-width: 460px;
}
.cc-btn-no, .cc-btn-yes {
  flex: 1; padding: 12px 18px; border-radius: 12px; border: 2px solid;
  font-size: .93rem; font-weight: 700; cursor: pointer;
  display: flex; align-items: center; justify-content: center; gap: 8px;
  transition: all .16s;
}
.cc-btn-no:disabled, .cc-btn-yes:disabled {
  opacity: .35; cursor: not-allowed;
}
.cc-btn-icon { font-size: 1.05em; }
.cc-btn-no  { background: var(--red-bg);   border-color: var(--red-border);   color: var(--red-dk); }
.cc-btn-no:not(:disabled):hover  { background: var(--red);   border-color: var(--red);   color: #fff; }
.cc-btn-yes { background: var(--green-bg); border-color: var(--green-border); color: var(--green); }
.cc-btn-yes:not(:disabled):hover { background: var(--green); border-color: var(--green); color: #fff; }

/* Done screen */
.cc-done {
  max-width: 520px; margin: 20px auto 0; text-align: center;
  background: var(--card); border: 2px solid var(--border);
  border-radius: 20px; padding: 48px 40px; box-shadow: var(--shadow-lg);
}
.cc-done-icon { font-size: 3rem; margin-bottom: 16px; }
.cc-done-title { font-size: 1.6rem; font-weight: 800; color: var(--text); margin-bottom: 10px; }
.cc-done-sub { color: var(--muted); font-size: .97rem; margin-bottom: 28px; line-height: 1.6; }
.cc-done-btns { display: flex; flex-direction: column; gap: 10px; align-items: center; }
.cc-done-btns .btn { min-width: 260px; border-radius: 99px; }

/* Card answered states (flash feedback) */
.cc-card.cc-flash-yes { border-color: var(--green); box-shadow: 0 0 0 4px var(--green-bg); }
.cc-card.cc-flash-no  { border-color: var(--red);   box-shadow: 0 0 0 4px var(--red-bg); }

/* Responsive */
@media (max-width: 600px) {
  .cc-card { padding: 24px 20px 20px; }
  .cc-card-q { font-size: 1.06rem; }
  .cc-toolbar { flex-direction: column; align-items: flex-start; }
  .cc-judge { flex-direction: column; }
}

/* Card slide-out / slide-in transition */
@keyframes ccSlideOut {
  to { opacity: 0; transform: translateX(-40px) scale(.97); }
}
@keyframes ccSlideIn {
  from { opacity: 0; transform: translateX(40px) scale(.97); }
  to   { opacity: 1; transform: none; }
}
.cc-card.sliding-out { animation: ccSlideOut .22s ease forwards; pointer-events: none; }
.cc-card.sliding-in  { animation: ccSlideIn  .25s ease forwards; }

/* ============================================================
   FLOATING CALCULATOR
   ============================================================ */
.calc-fab {
  position: fixed; bottom: 28px; left: 28px; z-index: 8000;
  width: 56px; height: 56px; border-radius: 50%;
  background: var(--blue); color: #fff;
  border: none; font-size: 1.45rem; cursor: pointer;
  box-shadow: 0 4px 20px rgba(29,107,243,.45);
  display: flex; align-items: center; justify-content: center;
  transition: transform .15s, box-shadow .15s;
}
.calc-fab:hover { transform: scale(1.1); box-shadow: 0 6px 28px rgba(29,107,243,.55); }

.calc-panel {
  position: fixed; bottom: 96px; left: 28px; z-index: 8001;
  background: #1a1a2e; border-radius: 20px;
  box-shadow: 0 16px 60px rgba(0,0,0,.45);
  width: 280px; overflow: hidden;
  animation: calcPop .2s ease;
}
.calc-panel.hidden { display: none; }
@keyframes calcPop {
  from { opacity: 0; transform: scale(.88) translateY(16px); }
  to   { opacity: 1; transform: none; }
}

.calc-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px 18px 8px; background: #12122a;
}
.calc-title { color: rgba(255,255,255,.6); font-size: .78rem; font-weight: 700; text-transform: uppercase; letter-spacing: .07em; }
.calc-close {
  background: none; border: none; color: rgba(255,255,255,.5);
  font-size: 1.4rem; cursor: pointer; line-height: 1; padding: 0 2px;
  transition: color .15s;
}
.calc-close:hover { color: #fff; }

.calc-display {
  font-family: var(--mono); font-size: 2.1rem; font-weight: 300;
  color: #fff; text-align: right; padding: 8px 20px 4px;
  background: #12122a; word-break: break-all; min-height: 56px;
  display: flex; align-items: center; justify-content: flex-end;
  letter-spacing: -.02em;
}
.calc-history {
  font-family: var(--mono); font-size: .72rem; color: rgba(255,255,255,.35);
  text-align: right; padding: 0 20px 10px; background: #12122a;
  min-height: 20px; word-break: break-all;
}

.calc-grid {
  display: grid; grid-template-columns: repeat(4, 1fr);
  gap: 1px; background: rgba(255,255,255,.06);
  padding: 2px;
}
.calc-btn {
  padding: 18px 0; border: none; font-size: .97rem; font-weight: 500;
  cursor: pointer; background: #252540; color: #fff;
  border-radius: 8px; transition: background .1s; user-select: none;
}
.calc-btn:hover  { background: #333360; }
.calc-btn:active { background: #4444aa; }
.calc-wide { grid-column: span 2; }
.calc-fn  { background: #313155; color: #e0e0ff; }
.calc-fn:hover { background: #44447a; }
.calc-op  { background: #1d6bf3; color: #fff; }
.calc-op:hover { background: #1558d6; }
.calc-op.active-op { background: #fff; color: #1d6bf3; }
.calc-eq  { background: #1d6bf3; color: #fff; }
.calc-eq:hover { background: #1558d6; }

@media (max-width: 420px) {
  .calc-panel { width: calc(100vw - 32px); left: 16px; bottom: 90px; }
  .calc-fab   { width: 48px; height: 48px; font-size: 1.2rem; bottom: 20px; left: 20px; }
}
