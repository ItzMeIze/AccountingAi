/* ============================================================
   BAF3M Classified Balance Sheet â€” Stylesheet
   ============================================================ */

/* ---------- Design tokens ---------- */
:root {
  --blue:    #1d6bf3;
  --blue-bg: #e8f0fe;
  --blue-border: #b3d1ff;
  --red:     #d93025;
  --red-bg:  #fde8e8;
  --red-border: #f5b7b7;
  --green:   #1e8e3e;
  --green-bg:#e6f4ea;
  --green-border:#a8dab5;
  --bg:      #f5f7fa;
  --card:    #ffffff;
  --text:    #1a1a2e;
  --muted:   #5f6b7a;
  --border:  #dfe3e8;
  --radius:  10px;
  --shadow:  0 2px 12px rgba(0,0,0,.06);
  --font:    'Inter', 'Segoe UI', system-ui, sans-serif;
  --mono:    'JetBrains Mono', 'Consolas', monospace;
  --nav-h:   56px;
}

/* ---------- Reset ---------- */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; scroll-padding-top: calc(var(--nav-h) + 12px); }
body {
  font-family: var(--font);
  background: var(--bg);
  color: var(--text);
  line-height: 1.65;
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
}
img { max-width: 100%; }
a { color: var(--blue); text-decoration: none; }
a:hover { text-decoration: underline; }
ul, ol { padding-left: 1.4em; }

/* ---------- Utility ---------- */
.container { max-width: 1120px; margin: 0 auto; padding: 0 24px; }
.hidden { display: none !important; }
.badge { background: var(--blue); color: #fff; font-size: .7em; padding: 2px 8px; border-radius: 999px; vertical-align: middle; margin-left: 6px; }

/* Inline tags */
.tag-asset  { background: var(--blue-bg); color: var(--blue); padding: 1px 6px; border-radius: 4px; font-weight: 600; }
.tag-liab   { background: var(--red-bg); color: var(--red); padding: 1px 6px; border-radius: 4px; font-weight: 600; }
.tag-equity { background: var(--green-bg); color: var(--green); padding: 1px 6px; border-radius: 4px; font-weight: 600; }

/* ============================================================
   NAVIGATION
   ============================================================ */
#topnav {
  position: sticky; top: 0; z-index: 900;
  background: rgba(255,255,255,.92);
  backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--border);
  height: var(--nav-h);
}
.nav-inner {
  max-width: 1120px; margin: 0 auto; padding: 0 24px;
  display: flex; align-items: center; height: 100%;
}
.brand { font-weight: 800; font-size: 1.1rem; color: var(--text); margin-right: auto; }
.brand span { color: var(--blue); }
#nav-links { list-style: none; display: flex; gap: 6px; padding: 0; }
#nav-links li a {
  display: block; padding: 6px 12px; border-radius: 6px;
  font-size: .88rem; font-weight: 500; color: var(--muted);
  transition: background .15s, color .15s;
}
#nav-links li a:hover, #nav-links li a.active { background: var(--blue-bg); color: var(--blue); text-decoration: none; }
.hamburger { display: none; background: none; border: none; font-size: 1.6rem; cursor: pointer; color: var(--text); }

/* Mobile nav */
@media (max-width: 820px) {
  .hamburger { display: block; }
  #nav-links {
    display: none; flex-direction: column; position: absolute;
    top: var(--nav-h); left: 0; right: 0;
    background: #fff; border-bottom: 1px solid var(--border);
    padding: 12px 24px; gap: 2px;
  }
  #nav-links.open { display: flex; }
}

/* ============================================================
   HERO
   ============================================================ */
.hero {
  background: linear-gradient(135deg, #1d6bf3 0%, #0d47a1 100%);
  color: #fff; padding: 80px 24px 64px; text-align: center;
}
.hero-inner { max-width: 780px; margin: 0 auto; }
.hero-tag { font-size: .85rem; letter-spacing: .08em; text-transform: uppercase; opacity: .8; margin-bottom: 12px; }
.hero h1 { font-size: clamp(2rem, 5vw, 3.2rem); line-height: 1.2; margin-bottom: 16px; }
.hero h1 em { font-style: normal; color: #90caf9; }
.hero-sub { font-size: 1.1rem; opacity: .85; margin-bottom: 28px; }

/* Buttons */
.btn {
  display: inline-block; padding: 12px 28px; border-radius: 8px;
  font-weight: 600; font-size: .95rem; cursor: pointer; border: none;
  transition: transform .12s, box-shadow .12s;
}
.btn:hover { transform: translateY(-1px); box-shadow: 0 4px 14px rgba(0,0,0,.15); text-decoration: none; }
.btn-primary { background: #fff; color: var(--blue); }
.btn-outline { background: transparent; border: 2px solid var(--blue); color: var(--blue); }
.btn-outline:hover { background: var(--blue-bg); }
.btn-success { background: var(--green); color: #fff; }

/* ============================================================
   SECTIONS
   ============================================================ */
.section { padding: 72px 0; }
.section-alt { background: #fff; }
.section-title {
  font-size: 1.75rem; font-weight: 800; margin-bottom: 8px;
  display: flex; align-items: center; gap: 10px;
}
.section-intro { color: var(--muted); margin-bottom: 32px; font-size: 1.05rem; max-width: 760px; }

/* ============================================================
   CONCEPT CARDS  (Section 1)
   ============================================================ */
.concept-card {
  background: var(--card); border: 1px solid var(--border); border-radius: var(--radius);
  padding: 28px 32px; margin-bottom: 24px; box-shadow: var(--shadow);
}
.concept-card h3 { font-size: 1.2rem; margin-bottom: 10px; }
.concept-card.accent-blue  { border-left: 5px solid var(--blue); }
.concept-card.accent-red   { border-left: 5px solid var(--red); }
.concept-card.accent-green { border-left: 5px solid var(--green); }

/* Equation box */
.equation-box {
  display: flex; align-items: center; justify-content: center; flex-wrap: wrap;
  gap: 12px; padding: 20px; margin: 16px 0;
  background: #f0f4f9; border-radius: 8px; font-size: 1.25rem; font-weight: 700;
}
.equation-box.small { font-size: 1rem; padding: 14px; }
.eq-sign { font-size: 1.4em; color: var(--muted); }
.eq-part  { padding: 6px 16px; border-radius: 6px; }
.eq-asset  { background: var(--blue-bg);  color: var(--blue); }
.eq-liab   { background: var(--red-bg);   color: var(--red); }
.eq-equity { background: var(--green-bg); color: var(--green); }

.example-note { background: #fffbe6; border-left: 4px solid #f9a825; padding: 10px 14px; border-radius: 6px; margin: 12px 0; }

/* Comparison grid */
.comparison-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 14px; }
.compare-col { padding: 18px; border-radius: 8px; background: #f9fafb; border: 1px solid var(--border); }
.compare-col h4 { margin-bottom: 8px; }
.highlight-col { background: var(--blue-bg); border-color: var(--blue-border); }
@media (max-width: 640px) { .comparison-grid { grid-template-columns: 1fr; } }

/* ============================================================
   CLASSIFICATION CARDS  (Section 2)
   ============================================================ */
.class-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
.class-card {
  background: var(--card); border-radius: var(--radius); padding: 28px 28px 24px;
  border: 1px solid var(--border); box-shadow: var(--shadow); position: relative;
}
.class-card h3 { margin-bottom: 8px; }
.class-card h4 { margin-top: 14px; margin-bottom: 6px; font-size: .95rem; text-transform: uppercase; letter-spacing: .04em; color: var(--muted); }
.class-icon {
  position: absolute; top: -14px; right: 20px;
  width: 42px; height: 42px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-weight: 800; font-size: .8rem; color: #fff;
}
.blue-card  { border-top: 4px solid var(--blue); }
.blue-card .class-icon  { background: var(--blue); }
.red-card   { border-top: 4px solid var(--red); }
.red-card .class-icon   { background: var(--red); }
.green-card { border-top: 4px solid var(--green); }
.green-card .class-icon { background: var(--green); }
.full-width-card { grid-column: 1 / -1; }

.equity-detail-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 12px; }
@media (max-width: 640px) {
  .class-grid { grid-template-columns: 1fr; }
  .equity-detail-grid { grid-template-columns: 1fr; }
}

/* ============================================================
   RULES GRID  (Section 3)
   ============================================================ */
.rules-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 20px; }
.rule-card {
  background: var(--card); border: 1px solid var(--border); border-radius: var(--radius);
  padding: 22px 24px; box-shadow: var(--shadow); position: relative;
}
.rule-num {
  position: absolute; top: -12px; left: 16px;
  background: var(--blue); color: #fff; width: 28px; height: 28px;
  border-radius: 50%; display: flex; align-items: center; justify-content: center;
  font-weight: 700; font-size: .82rem;
}
.rule-card h4 { margin-bottom: 6px; margin-top: 4px; }

/* ============================================================
   EXAMPLE BALANCE SHEET  (Section 4)
   ============================================================ */
.bs-wrapper {
  background: #fff; border: 2px solid var(--border); border-radius: var(--radius);
  padding: 32px 28px; box-shadow: var(--shadow); overflow-x: auto;
}
.bs-heading { text-align: center; margin-bottom: 24px; }
.bs-heading .bs-line {
  font-weight: 700; font-size: 1.05rem; cursor: help;
  transition: background .15s; padding: 2px 8px; border-radius: 4px;
}
.bs-heading .bs-line:hover { background: #fff3cd; }
.bs-columns { display: grid; grid-template-columns: 1fr 1fr; gap: 32px; }

.bs-side { min-width: 0; }
.bs-section-head {
  font-size: 1.05rem; border-bottom: 2px solid var(--text); padding-bottom: 4px;
  margin-bottom: 10px; cursor: help;
}
.bs-left .bs-section-head { color: var(--blue); border-color: var(--blue); }
.bs-right .bs-section-head { color: var(--red); border-color: var(--red); }

.bs-sub-head {
  font-size: .9rem; font-weight: 700; margin: 16px 0 6px; color: var(--muted);
  cursor: help; padding: 2px 4px; border-radius: 4px; transition: background .15s;
}
.bs-sub-head:hover { background: #fff3cd; }

.bs-row {
  display: flex; justify-content: space-between; padding: 3px 0;
  font-size: .92rem; cursor: help; border-radius: 4px; padding-left: 4px; padding-right: 4px;
  transition: background .15s;
}
.bs-row:hover { background: #fff3cd; }
.bs-row.indent { padding-left: 22px; }
.amt { font-family: var(--mono); text-align: right; white-space: nowrap; }
.first-amt::before { content: ''; }
.underline-single { border-bottom: 1px solid var(--text); padding-bottom: 1px; }
.double-underline { border-bottom: 3px double var(--text); padding-bottom: 2px; font-weight: 700; }

.bs-row.subtotal { font-weight: 600; margin-top: 2px; }
.bs-row.section-subtotal { font-weight: 700; margin-top: 6px; border-top: 1px solid var(--border); padding-top: 6px; }
.bs-row.grand-total { font-weight: 800; font-size: 1rem; margin-top: 12px; border-top: 2px solid var(--text); padding-top: 8px; }
.bs-row.last-item { }

.balance-check-banner {
  margin-top: 20px; padding: 14px 20px; border-radius: 8px; font-size: .95rem; text-align: center;
}
.balance-check-banner.balanced { background: var(--green-bg); color: var(--green); border: 1px solid var(--green-border); }
.balance-check-banner.unbalanced { background: var(--red-bg); color: var(--red); border: 1px solid var(--red-border); }

@media (max-width: 700px) {
  .bs-columns { grid-template-columns: 1fr; gap: 24px; }
}

/* ============================================================
   DRAG & DROP  (Section 5)
   ============================================================ */
.drag-bank {
  display: flex; flex-wrap: wrap; gap: 10px; margin: 20px 0 28px;
  padding: 20px; background: #fff; border: 2px dashed var(--border); border-radius: var(--radius);
  min-height: 60px;
}
.drag-item {
  padding: 8px 16px; border-radius: 8px; font-size: .88rem; font-weight: 600;
  cursor: grab; user-select: none; transition: transform .1s, box-shadow .1s;
  display: flex; align-items: center; gap: 8px;
  position: relative;
}
.drag-item:active { cursor: grabbing; transform: scale(1.05); box-shadow: 0 4px 16px rgba(0,0,0,.15); }
.drag-item .drag-val { font-family: var(--mono); font-size: .8rem; opacity: .7; }

.drag-item[data-correct="CA"],
.drag-item[data-correct="LTA"] { background: var(--blue-bg); border: 1px solid var(--blue-border); color: var(--blue); }
.drag-item[data-correct="CL"],
.drag-item[data-correct="LTL"] { background: var(--red-bg); border: 1px solid var(--red-border); color: var(--red); }
.drag-item[data-correct="OE"] { background: var(--green-bg); border: 1px solid var(--green-border); color: var(--green); }

/* Drop zones */
.drop-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 28px; margin-bottom: 24px; }
.drop-side h4 { font-size: 1.1rem; margin-bottom: 12px; }
.drop-zone {
  border: 2px dashed var(--border); border-radius: var(--radius);
  padding: 14px; margin-bottom: 14px; min-height: 90px; transition: border-color .2s, background .2s;
}
.drop-zone.drag-over { border-color: var(--blue); background: rgba(29,107,243,.04); }
.drop-zone h5 { font-size: .9rem; color: var(--muted); margin-bottom: 8px; }
.drop-list { display: flex; flex-wrap: wrap; gap: 8px; min-height: 36px; }
.subtotal-line { margin-top: 10px; font-weight: 700; font-family: var(--mono); font-size: .88rem; text-align: right; }
.total-line {
  font-size: 1.05rem; font-weight: 800; padding: 10px 14px;
  border-radius: 8px; text-align: right; margin-top: 4px;
}
.blue-total { background: var(--blue-bg); color: var(--blue); }
.red-total  { background: var(--red-bg);  color: var(--red); }

.drag-feedback {
  padding: 16px 20px; border-radius: 8px; margin-bottom: 18px;
  font-size: .95rem; font-weight: 600; text-align: center;
}
.drag-feedback.success { background: var(--green-bg); color: var(--green); border: 1px solid var(--green-border); }
.drag-feedback.error   { background: var(--red-bg);   color: var(--red);   border: 1px solid var(--red-border); }
.drag-feedback.partial { background: #fff3cd; color: #856404; border: 1px solid #ffe69c; }

.drag-item.correct-placement { outline: 2px solid var(--green); outline-offset: 1px; }
.drag-item.wrong-placement   { outline: 2px solid var(--red);   outline-offset: 1px; animation: shake .35s; }

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20%, 60% { transform: translateX(-4px); }
  40%, 80% { transform: translateX(4px); }
}

@media (max-width: 700px) { .drop-grid { grid-template-columns: 1fr; } }

/* Hover tooltip for drag items */
.drag-item .drag-tip {
  display: none; position: absolute; bottom: calc(100% + 8px); left: 50%;
  transform: translateX(-50%); background: #1a1a2e; color: #fff;
  padding: 8px 12px; border-radius: 6px; font-size: .78rem; font-weight: 400;
  width: max-content; max-width: 260px; z-index: 800; text-align: left;
  pointer-events: none; line-height: 1.45;
}
.drag-item .drag-tip::after {
  content: ''; position: absolute; top: 100%; left: 50%; transform: translateX(-50%);
  border: 6px solid transparent; border-top-color: #1a1a2e;
}
.drag-item:hover .drag-tip { display: block; }

/* ============================================================
   COMMON MISTAKES  (Section 6)
   ============================================================ */
.mistakes-grid { display: grid; gap: 14px; max-width: 800px; }
.mistake-card {
  background: var(--card); border: 1px solid var(--border); border-radius: var(--radius);
  overflow: hidden; box-shadow: var(--shadow); cursor: pointer; transition: border-color .2s;
}
.mistake-card:hover { border-color: var(--blue-border); }
.mistake-q {
  padding: 16px 20px; font-weight: 600; display: flex; align-items: center; gap: 12px;
  position: relative;
}
.mistake-q::after {
  content: '+'; position: absolute; right: 20px; font-size: 1.3rem; font-weight: 700;
  color: var(--muted); transition: transform .2s;
}
.mistake-card[data-open="true"] .mistake-q::after { content: '\2212'; }
.m-num {
  display: inline-flex; align-items: center; justify-content: center;
  width: 28px; height: 28px; border-radius: 50%; background: var(--blue); color: #fff;
  font-size: .78rem; flex-shrink: 0;
}
.mistake-a {
  max-height: 0; overflow: hidden; transition: max-height .35s ease, padding .35s ease;
  padding: 0 20px; background: #f9fafb; border-top: 1px solid transparent;
}
.mistake-card[data-open="true"] .mistake-a {
  max-height: 400px; padding: 16px 20px; border-top-color: var(--border);
}
.mistake-a p { margin-bottom: 8px; }

/* ============================================================
   QUIZ  (Section 7)
   ============================================================ */
.quiz-questions { display: grid; gap: 20px; margin-bottom: 24px; }
.q-card {
  background: var(--card); border: 1px solid var(--border); border-radius: var(--radius);
  padding: 22px 24px; box-shadow: var(--shadow);
}
.q-card.correct  { border-color: var(--green); background: var(--green-bg); }
.q-card.incorrect { border-color: var(--red);   background: var(--red-bg); }
.q-text { font-weight: 600; margin-bottom: 12px; }
.q-num { color: var(--blue); margin-right: 6px; }
.q-options { display: grid; gap: 8px; }
.q-option {
  display: flex; align-items: center; gap: 10px;
  padding: 10px 14px; border: 1px solid var(--border); border-radius: 8px;
  cursor: pointer; transition: background .12s, border-color .12s; font-size: .92rem;
}
.q-option:hover { background: var(--blue-bg); border-color: var(--blue-border); }
.q-option input { accent-color: var(--blue); }
.q-option.selected { background: var(--blue-bg); border-color: var(--blue); }
.q-option.reveal-correct { background: var(--green-bg); border-color: var(--green); }
.q-option.reveal-wrong   { background: var(--red-bg);   border-color: var(--red); }
.q-explain { margin-top: 10px; font-size: .88rem; padding: 10px 14px; border-radius: 6px; display: none; }
.q-card.correct .q-explain,
.q-card.incorrect .q-explain { display: block; }
.q-card.correct .q-explain   { background: #e6f4ea; color: var(--green); }
.q-card.incorrect .q-explain { background: #fde8e8; color: var(--red); }

.quiz-result {
  padding: 24px; border-radius: var(--radius); text-align: center; font-size: 1.1rem; font-weight: 700;
}
.quiz-result.pass { background: var(--green-bg); color: var(--green); border: 2px solid var(--green-border); }
.quiz-result.fail { background: var(--red-bg);   color: var(--red);   border: 2px solid var(--red-border); }
.score-bar { height: 10px; border-radius: 99px; background: var(--border); margin: 14px auto 0; max-width: 320px; overflow: hidden; }
.score-fill { height: 100%; border-radius: 99px; transition: width .5s ease; }

/* ============================================================
   TOOLTIP (for balance sheet hover)
   ============================================================ */
.tooltip {
  position: fixed; z-index: 9999; background: #1a1a2e; color: #fff;
  padding: 10px 14px; border-radius: 8px; font-size: .82rem; max-width: 300px;
  line-height: 1.5; pointer-events: none; box-shadow: 0 4px 20px rgba(0,0,0,.25);
}

/* ============================================================
   FOOTER
   ============================================================ */
footer {
  background: #1a1a2e; color: rgba(255,255,255,.6); padding: 24px 0; text-align: center; font-size: .85rem;
}

/* ============================================================
   SCROLLBAR (subtle)
   ============================================================ */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #c4c9d1; border-radius: 99px; }

/* ============================================================
   PRINT
   ============================================================ */
@media print {
  #topnav, .hero, #practice, #mistakes, #quiz, footer, .btn { display: none; }
  .section { padding: 24px 0; }
  body { font-size: 12px; }
}
